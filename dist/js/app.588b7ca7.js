(function(){"use strict";var e={2248:function(e,t,s){var a=s(5130),r=s(6768);const o={id:"app"},n={class:"container py-4"};function l(e,t,s,a,l,i){const c=(0,r.g2)("Navbar"),d=(0,r.g2)("router-view"),u=(0,r.g2)("AppFooter");return(0,r.uX)(),(0,r.CE)("div",o,[a.isAuthenticated?((0,r.uX)(),(0,r.Wv)(c,{key:0})):(0,r.Q3)("",!0),(0,r.Lk)("main",n,[(0,r.bF)(d)]),(0,r.bF)(u)])}var i=s(782),c=s(4232);const d={class:"navbar navbar-expand-lg navbar-dark bg-primary"},u={class:"container"},m={class:"collapse navbar-collapse",id:"navbarNav"},p={class:"navbar-nav me-auto"},f={class:"nav-item"},g={class:"nav-item"},v={class:"d-flex align-items-center"},b={class:"dropdown"},h={class:"btn btn-primary dropdown-toggle d-flex align-items-center",href:"#",role:"button",id:"userMenu","data-bs-toggle":"dropdown"},k={class:"me-2"},y={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"userMenu"};function w(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",d,[(0,r.Lk)("div",u,[(0,r.bF)(i,{class:"navbar-brand",to:"/"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("SocialApp")]))),_:1}),t[6]||(t[6]=(0,r.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,r.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,r.Lk)("div",m,[(0,r.Lk)("ul",p,[(0,r.Lk)("li",f,[(0,r.bF)(i,{class:"nav-link",to:"/"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("Home")]))),_:1})]),(0,r.Lk)("li",g,[(0,r.bF)(i,{class:"nav-link",to:"/create-post"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("Create Post")]))),_:1})])]),(0,r.Lk)("div",v,[(0,r.Lk)("div",b,[(0,r.Lk)("a",h,[(0,r.Lk)("span",k,(0,c.v_)(o.currentUser.username),1)]),(0,r.Lk)("ul",y,[(0,r.Lk)("li",null,[(0,r.bF)(i,{class:"dropdown-item",to:`/profile/${o.currentUser.username}`},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("My Profile")]))),_:1},8,["to"])]),t[5]||(t[5]=(0,r.Lk)("li",null,[(0,r.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>o.logout&&o.logout(...e)),["prevent"]))},"Logout")])])])])])])])}s(4114);var L=s(1387),_={name:"AppNavbar",setup(){const e=(0,i.Pj)(),t=(0,L.rd)(),s=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),a=()=>{e.dispatch("auth/logout"),t.push("/login")};return{currentUser:s,logout:a}}},P=s(1241);const C=(0,P.A)(_,[["render",w]]);var E=C;const x={class:"bg-light text-center py-3 mt-auto"},U={class:"container"},W={class:"mb-0"};function F(e,t){return(0,r.uX)(),(0,r.CE)("footer",x,[(0,r.Lk)("div",U,[(0,r.Lk)("p",W,"Â© "+(0,c.v_)(e.currentYear)+" SocialApp. All rights reserved.",1)])])}const D={},I=(0,P.A)(D,[["render",F]]);var A=I,X={name:"App",components:{Navbar:E,AppFooter:A},setup(){const e=(0,i.Pj)(),t=(0,r.EW)((()=>e.getters["auth/isAuthenticated"]));return(0,r.sV)((async()=>{t.value&&await e.dispatch("auth/fetchCurrentUser")})),{isAuthenticated:t}}};const S=(0,P.A)(X,[["render",l]]);var $=S,V=(s(8111),s(3579),s(4373));const R=V.A.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});R.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>Promise.reject(e))),R.interceptors.response.use((e=>e),(e=>{if(console.error("API Interceptor Error:",{message:e.message,code:e.code,response:e.response,request:e.request}),"ERR_NETWORK"===e.code&&console.error("Network Error: Unable to connect to the server"),e.response)switch(e.response.status){case 401:localStorage.removeItem("token"),Ta.push("/login");break;case 403:console.error("Access Forbidden");break;case 404:console.error("Resource Not Found");break;case 500:console.error("Internal Server Error");break}return Promise.reject(e)}));var q=R,j={login(e,t){const s=new URLSearchParams;return s.append("username",e),s.append("password",t),console.log("Login Request Details:",{url:"/users/login",method:"POST",data:{username:e}}),q.post("/users/login",s.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).catch((e=>{throw console.error("Detailed Login Error:",{message:e.message,code:e.code,response:e.response,request:e.request,config:e.config}),e}))},register(e){return q.post("/users/",e)},getCurrentUser(){return q.get("/users/me")}};const K={token:localStorage.getItem("token")||"",user:JSON.parse(localStorage.getItem("user"))||null,status:""},O={isAuthenticated:e=>!!e.token,authStatus:e=>e.status,currentUser:e=>e.user},B={async login({commit:e},{username:t,password:s}){e("auth_request");try{console.log("Login action started with username:",t);const r=await j.login(t,s);console.log("Login response received:",r.data);const o=r.data.access_token;if(!o)return console.error("No token in response:",r.data),e("auth_error"),!1;localStorage.setItem("token",o),e("auth_success",o);try{return await e("fetchCurrentUser"),!0}catch(a){return console.error("Error fetching user profile:",a),!0}}catch(r){return console.error("Login error:",r.response?r.response.data:r),e("auth_error"),localStorage.removeItem("token"),!1}},async register({commit:e,dispatch:t},s){e("auth_request");try{return await j.register(s),t("login",{username:s.username,password:s.password})}catch(a){return e("auth_error"),!1}},async fetchCurrentUser({commit:e}){try{const t=await j.getCurrentUser(),s=t.data;return localStorage.setItem("user",JSON.stringify(s)),e("set_user",s),s}catch(t){return console.error("Failed to fetch user profile:",t),e("auth_error"),null}},logout({commit:e}){localStorage.removeItem("token"),localStorage.removeItem("user"),e("logout"),Ta.push("/login")}},N={auth_request(e){e.status="loading"},auth_success(e,t){e.status="success",e.token=t},auth_error(e){e.status="error",e.token=""},set_user(e,t){e.user=t},logout(e){e.status="",e.token="",e.user=null}};var Q={namespaced:!0,state:K,getters:O,actions:B,mutations:N},J=(s(2489),s(116),{getPosts(e=10,t=0,s=""){return q.get(`/posts/?limit=${e}&skip=${t}&search=${s}`)},getPostById(e){return q.get(`/posts/${e}`)},getLatestPost(){return q.get("/posts/latest")},createPost(e){return q.post("/posts/",e)},updatePost(e,t){return q.put(`/posts/${e}`,t)},deletePost(e){return q.delete(`/posts/${e}`)},votePost(e){return q.post("/vote/",{post_id:e})}});const T={posts:[],currentPost:null,loading:!1,error:null},M={allPosts:e=>e.posts,getPostById:e=>t=>e.posts.find((e=>e.id===t)),getCurrentPost:e=>e.currentPost},H={async fetchPosts({commit:e},{limit:t,skip:s,search:a}){e("set_loading",!0);try{const r=await J.getPosts(t,s,a);e("set_posts",r.data)}catch(r){e("set_error",r.message)}finally{e("set_loading",!1)}},async fetchPostById({commit:e},t){e("set_loading",!0);try{const s=await J.getPostById(t);return e("set_current_post",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async createPost({commit:e},t){e("set_loading",!0);try{const s=await J.createPost(t);return e("add_post",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async updatePost({commit:e},{id:t,postData:s}){e("set_loading",!0);try{const a=await J.updatePost(t,s);return e("update_post",a.data),T.currentPost&&T.currentPost.id===t&&e("set_current_post",a.data),a.data}catch(a){return e("set_error",a.message),null}finally{e("set_loading",!1)}},async deletePost({commit:e},t){e("set_loading",!0);try{return await J.deletePost(t),e("remove_post",t),!0}catch(s){return e("set_error",s.message),!1}finally{e("set_loading",!1)}},async votePost({commit:e},t){try{return await J.votePost(t),e("toggle_vote",t),!0}catch(s){return e("set_error",s.message),!1}}},z={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_posts(e,t){e.posts=t},add_post(e,t){e.posts.unshift(t)},set_current_post(e,t){e.currentPost=t},update_post(e,t){const s=e.posts.findIndex((e=>e.id===t.id));-1!==s&&e.posts.splice(s,1,t)},remove_post(e,t){e.posts=e.posts.filter((e=>e.id!==t)),e.currentPost&&e.currentPost.id===t&&(e.currentPost=null)},toggle_vote(e,t){const s=e.posts.find((e=>e.id===t));s&&(s.votes=s.hasVoted?s.votes-1:s.votes+1,s.hasVoted=!s.hasVoted),e.currentPost&&e.currentPost.id===t&&(e.currentPost.votes=e.currentPost.hasVoted?e.currentPost.votes-1:e.currentPost.votes+1,e.currentPost.hasVoted=!e.currentPost.hasVoted)}};var Z={namespaced:!0,state:T,getters:M,actions:H,mutations:z},G={getComments(e){return q.get(`/posts/${e}/comments`)},createComment(e,t){return q.post(`/posts/${e}/comment`,{content:t})}};const Y={comments:{},loading:!1,error:null},ee={getCommentsByPostId:e=>t=>e.comments[t]||[]},te={async fetchComments({commit:e},t){e("set_loading",!0);try{const s=await G.getComments(t);return e("set_comments",{postId:t,comments:s.data}),s.data}catch(s){return e("set_error",s.message),[]}finally{e("set_loading",!1)}},async createComment({commit:e,dispatch:t},{postId:s,content:a}){e("set_loading",!0);try{const e=await G.createComment(s,a);return await t("fetchComments",s),e.data}catch(r){return e("set_error",r.message),null}finally{e("set_loading",!1)}}},se={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_comments(e,{postId:t,comments:s}){e.comments={...e.comments,[t]:s}},add_comment(e,{postId:t,comment:s}){e.comments[t]||(e.comments[t]=[]),e.comments[t].push(s)}};var ae={namespaced:!0,state:Y,getters:ee,actions:te,mutations:se},re={getUsers(){return q.get("/users/")},getUserById(e){return q.get(`/users/id/${e}`)},getUserByUsername(e){return q.get(`/users/username/${e}`)},updateUser(e,t){return q.put(`/users/${e}`,t)},deleteUser(e){return q.delete(`/users/${e}`)}},oe={followUser(e){return q.post(`/users/follow/${e}`)},unfollowUser(e){return q.post(`/users/unfollow/${e}`)},getFollowers(){return q.get("/users/followers")},getFollowing(){return q.get("/users/following")}};const ne={users:[],userProfiles:{},followers:[],following:[],loading:!1,error:null},le={allUsers:e=>e.users,getUserById:e=>t=>e.userProfiles[t],followers:e=>e.followers,following:e=>e.following},ie={async fetchUsers({commit:e}){e("set_loading",!0);try{const t=await re.getUsers();return e("set_users",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async fetchUserById({commit:e},t){e("set_loading",!0);try{const s=await re.getUserById(t);return e("set_user_profile",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async fetchUserByUsername({commit:e},t){e("set_loading",!0);try{const s=await re.getUserByUsername(t);return e("set_user_profile",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async fetchFollowers({commit:e}){e("set_loading",!0);try{const t=await oe.getFollowers();return e("set_followers",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async fetchFollowing({commit:e}){e("set_loading",!0);try{const t=await oe.getFollowing();return e("set_following",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async followUser({commit:e,dispatch:t},s){try{return await oe.followUser(s),await t("fetchFollowing"),!0}catch(a){return e("set_error",a.message),!1}},async unfollowUser({commit:e,dispatch:t},s){try{return await oe.unfollowUser(s),await t("fetchFollowing"),!0}catch(a){return e("set_error",a.message),!1}}},ce={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_users(e,t){e.users=t},set_user_profile(e,t){e.userProfiles={...e.userProfiles,[t.id]:t}},set_followers(e,t){e.followers=t},set_following(e,t){e.following=t}};var de={namespaced:!0,state:ne,getters:le,actions:ie,mutations:ce},ue=(0,i.y$)({modules:{auth:Q,posts:Z,comments:ae,users:de}});const me={class:"home-container"},pe={class:"row"},fe={class:"col-lg-3 d-none d-lg-block"},ge={class:"card mb-4"},ve={class:"card-body"},be={class:"d-flex flex-column align-items-center text-center mb-3"},he={class:"user-avatar user-avatar-lg bg-primary text-white rounded-circle mb-2"},ke={class:"mb-0"},ye={class:"text-muted mb-1"},we={class:"d-flex justify-content-around mb-2"},Le={class:"text-center"},_e={class:"text-center"},Pe={class:"d-grid"},Ce={class:"card"},Ee={class:"card-body"},xe={class:"list-group list-group-flush"},Ue={class:"col-lg-6 col-md-8"},We={class:"card mb-4"},Fe={class:"card-body"},De={class:"d-flex align-items-center mb-3"},Ie={class:"user-avatar user-avatar-sm bg-primary text-white rounded-circle me-2"},Ae={class:"d-flex justify-content-around"},Xe={key:0,class:"text-center my-5"},Se={key:1,class:"card"},$e={class:"card-body text-center py-5"},Ve={key:2},Re={key:3,class:"text-center my-4"},qe=["disabled"],je={key:0,class:"spinner-border spinner-border-sm me-2"},Ke={class:"col-lg-3 col-md-4 d-none d-md-block"},Oe={class:"card mb-4"},Be={class:"card-body"},Ne={key:0,class:"text-center my-3"},Qe={key:1,class:"text-muted text-center"},Je={key:2},Te={class:"user-avatar user-avatar-sm bg-secondary text-white rounded-circle me-2"},Me={class:"flex-grow-1"},He=["onClick","disabled"],ze={key:0,class:"spinner-border spinner-border-sm"},Ze={key:1};function Ge(e,t,s,o,n,l){const i=(0,r.g2)("router-link"),d=(0,r.g2)("post-card");return(0,r.uX)(),(0,r.CE)("div",me,[(0,r.Lk)("div",pe,[(0,r.Lk)("div",fe,[(0,r.Lk)("div",ge,[(0,r.Lk)("div",ve,[(0,r.Lk)("div",be,[(0,r.Lk)("div",he,(0,c.v_)(o.userInitial),1),(0,r.Lk)("h5",ke,(0,c.v_)(o.currentUser.username),1),(0,r.Lk)("p",ye,(0,c.v_)(o.currentUser.email),1)]),(0,r.Lk)("div",we,[(0,r.Lk)("div",Le,[(0,r.Lk)("h6",null,(0,c.v_)(o.followingCount),1),t[2]||(t[2]=(0,r.Lk)("small",{class:"text-muted"},"Following",-1))]),(0,r.Lk)("div",_e,[(0,r.Lk)("h6",null,(0,c.v_)(o.followersCount),1),t[3]||(t[3]=(0,r.Lk)("small",{class:"text-muted"},"Followers",-1))])]),(0,r.Lk)("div",Pe,[(0,r.bF)(i,{to:`/profile/${o.currentUser.username}`,class:"btn btn-outline-primary"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)(" View Profile ")]))),_:1},8,["to"])])])]),(0,r.Lk)("div",Ce,[(0,r.Lk)("div",Ee,[t[8]||(t[8]=(0,r.Lk)("h5",{class:"card-title"},"Quick Links",-1)),(0,r.Lk)("div",xe,[(0,r.bF)(i,{to:"/",class:"list-group-item list-group-item-action"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"fas fa-home me-2"},null,-1),(0,r.eW)(" Home ")]))),_:1}),(0,r.bF)(i,{to:"/create-post",class:"list-group-item list-group-item-action"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Create Post ")]))),_:1}),(0,r.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>o.refreshPosts&&o.refreshPosts(...e)),["prevent"])),class:"list-group-item list-group-item-action"},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-sync-alt me-2"},null,-1),(0,r.eW)(" Refresh Feed ")]))])])])]),(0,r.Lk)("div",Ue,[(0,r.Lk)("div",We,[(0,r.Lk)("div",Fe,[(0,r.Lk)("div",De,[(0,r.Lk)("div",Ie,(0,c.v_)(o.userInitial),1),(0,r.bF)(i,{to:"/create-post",class:"form-control text-start text-muted"},{default:(0,r.k6)((()=>[(0,r.eW)(" What's on your mind, "+(0,c.v_)(o.currentUser.username)+"? ",1)])),_:1})]),(0,r.Lk)("div",Ae,[(0,r.bF)(i,{to:"/create-post",class:"btn btn-outline-primary flex-grow-1 mx-1"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Create Post ")]))),_:1})])])]),o.loading?((0,r.uX)(),(0,r.CE)("div",Xe,t[10]||(t[10]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading posts...",-1)]))):0===o.posts.length?((0,r.uX)(),(0,r.CE)("div",Se,[(0,r.Lk)("div",$e,[t[12]||(t[12]=(0,r.Lk)("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),t[13]||(t[13]=(0,r.Lk)("h5",null,"No posts yet",-1)),t[14]||(t[14]=(0,r.Lk)("p",{class:"text-muted"},"Start by creating a post or following users.",-1)),(0,r.bF)(i,{to:"/create-post",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Create Post ")]))),_:1})])])):((0,r.uX)(),(0,r.CE)("div",Ve,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.posts,(e=>((0,r.uX)(),(0,r.Wv)(d,{key:e.id,post:e,onVote:o.handleVote},null,8,["post","onVote"])))),128))])),o.posts.length>0?((0,r.uX)(),(0,r.CE)("div",Re,[(0,r.Lk)("button",{class:"btn btn-outline-primary",onClick:t[1]||(t[1]=(...e)=>o.loadMorePosts&&o.loadMorePosts(...e)),disabled:o.loading},[o.loading?((0,r.uX)(),(0,r.CE)("span",je)):(0,r.Q3)("",!0),t[15]||(t[15]=(0,r.eW)(" Load More Posts "))],8,qe)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ke,[(0,r.Lk)("div",Oe,[(0,r.Lk)("div",Be,[t[18]||(t[18]=(0,r.Lk)("h5",{class:"card-title"},"People to Follow",-1)),o.loadingUsers?((0,r.uX)(),(0,r.CE)("div",Ne,t[16]||(t[16]=[(0,r.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):0===o.suggestedUsers.length?((0,r.uX)(),(0,r.CE)("div",Qe,t[17]||(t[17]=[(0,r.Lk)("p",null,"No suggestions available",-1)]))):((0,r.uX)(),(0,r.CE)("div",Je,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.suggestedUsers,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"d-flex align-items-center mb-3"},[(0,r.Lk)("div",Te,(0,c.v_)(o.getUserInitial(e.username)),1),(0,r.Lk)("div",Me,[(0,r.bF)(i,{to:`/profile/${e.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,c.v_)(e.username),1)])),_:2},1032,["to"])]),(0,r.Lk)("button",{class:"btn btn-sm btn-primary follow-btn",onClick:t=>o.followUser(e.id),disabled:o.followingInProgress.includes(e.id)},[o.followingInProgress.includes(e.id)?((0,r.uX)(),(0,r.CE)("span",ze)):((0,r.uX)(),(0,r.CE)("span",Ze,"Follow"))],8,He)])))),128))]))])])])])])}s(1701);var Ye=s(144);const et={class:"card mb-4"},tt={class:"card-body"},st={class:"d-flex mb-3"},at={class:"bg-secondary text-white rounded-circle me-2 user-avatar"},rt={class:"mb-0"},ot={class:"text-muted"},nt={key:0,class:"dropdown ms-auto"},lt={class:"dropdown-menu dropdown-menu-end"},it={class:"card-title"},ct={class:"card-text"},dt={key:0,class:"text-primary mb-0"},ut={class:"d-flex justify-content-between align-items-center mt-3 pt-3 border-top"},mt={class:"d-flex align-items-center"};function pt(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",et,[(0,r.Lk)("div",tt,[(0,r.Lk)("div",st,[(0,r.Lk)("div",at,(0,c.v_)(o.ownerInitial),1),(0,r.Lk)("div",null,[(0,r.bF)(i,{to:`/profile/${s.post.owner.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("h6",rt,(0,c.v_)(s.post.owner.username),1)])),_:1},8,["to"]),(0,r.Lk)("small",ot,(0,c.v_)(o.formattedDate),1)]),o.isOwner?((0,r.uX)(),(0,r.CE)("div",nt,[t[4]||(t[4]=(0,r.Lk)("button",{class:"btn btn-sm",type:"button","data-bs-toggle":"dropdown"},[(0,r.Lk)("i",{class:"fas fa-ellipsis-v"})],-1)),(0,r.Lk)("ul",lt,[(0,r.Lk)("li",null,[(0,r.bF)(i,{to:`/edit-post/${s.post.id}`,class:"dropdown-item"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>o.confirmDelete&&o.confirmDelete(...e)),["prevent"]))},t[3]||(t[3]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-2"},null,-1),(0,r.eW)(" Delete ")]))])])])):(0,r.Q3)("",!0)]),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"text-decoration-none text-dark"},{default:(0,r.k6)((()=>[(0,r.Lk)("h5",it,(0,c.v_)(s.post.title),1),(0,r.Lk)("p",ct,(0,c.v_)(o.truncatedContent),1),o.isContentTruncated?((0,r.uX)(),(0,r.CE)("p",dt,"Read more...")):(0,r.Q3)("",!0)])),_:1},8,["to"]),(0,r.Lk)("div",ut,[(0,r.Lk)("div",mt,[(0,r.Lk)("button",{class:(0,c.C4)(["btn btn-sm",{"btn-primary":s.post.hasVoted,"btn-outline-primary":!s.post.hasVoted}]),onClick:t[1]||(t[1]=(...e)=>o.vote&&o.vote(...e))},[t[5]||(t[5]=(0,r.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(s.post.votes||0),1)],2),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"btn btn-sm btn-outline-secondary ms-2"},{default:(0,r.k6)((()=>[t[6]||(t[6]=(0,r.Lk)("i",{class:"fas fa-comment me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(o.commentsCount),1)])),_:1},8,["to"])]),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"btn btn-sm btn-outline-primary"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" View Details ")]))),_:1},8,["to"])])])])}var ft={name:"PostCard",props:{post:{type:Object,required:!0}},emits:["vote"],setup(e,{emit:t}){const s=(0,i.Pj)(),a=200,o=(0,Ye.KR)(0),n=(0,r.EW)((()=>s.getters["auth/currentUser"]||{})),l=(0,r.EW)((()=>n.value.id===e.post.owner_id)),c=(0,r.EW)((()=>e.post.owner?.username?.charAt(0).toUpperCase()||"")),d=(0,r.EW)((()=>e.post.content.length<=a?e.post.content:e.post.content.substring(0,a)+"...")),u=(0,r.EW)((()=>e.post.content.length>a)),m=(0,r.EW)((()=>{const t=new Date(e.post.created_at);return t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})),p=()=>{t("vote",e.post.id)},f=async()=>{if(confirm("Are you sure you want to delete this post?")){await s.dispatch("posts/deletePost",e.post.id)}},g=async()=>{try{const t=await s.dispatch("comments/fetchComments",e.post.id);o.value=t.length}catch(t){console.error("Failed to fetch comments:",t)}};return g(),{currentUser:n,isOwner:l,ownerInitial:c,truncatedContent:d,isContentTruncated:u,formattedDate:m,vote:p,confirmDelete:f,commentsCount:o}}};const gt=(0,P.A)(ft,[["render",pt],["__scopeId","data-v-260b2a6d"]]);var vt=gt,bt={name:"HomePage",components:{PostCard:vt},setup(){const e=(0,i.Pj)(),t=(0,Ye.KR)(10),s=(0,Ye.KR)(0),a=(0,Ye.KR)(""),o=(0,Ye.KR)([]),n=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),l=(0,r.EW)((()=>n.value.username?.charAt(0).toUpperCase()||"")),c=(0,r.EW)((()=>e.getters["posts/allPosts"])),d=(0,r.EW)((()=>e.state.posts.loading)),u=(0,r.EW)((()=>e.state.users.loading)),m=(0,r.EW)((()=>e.getters["users/allUsers"])),p=(0,r.EW)((()=>e.getters["users/following"]||[])),f=(0,r.EW)((()=>p.value.length)),g=(0,r.EW)((()=>e.getters["users/followers"]?.length||0)),v=(0,r.EW)((()=>{const e=p.value.map((e=>e.id));return m.value.filter((t=>t.id!==n.value.id&&!e.includes(t.id))).slice(0,5)})),b=async()=>{await e.dispatch("posts/fetchPosts",{limit:t.value,skip:s.value,search:a.value})},h=async()=>{s.value+=t.value,await b()},k=async()=>{s.value=0,await b()},y=async t=>{await e.dispatch("posts/votePost",t)},w=e=>e?.charAt(0).toUpperCase()||"",L=async t=>{o.value.push(t);try{await e.dispatch("users/followUser",t),e.dispatch("users/fetchUsers"),e.dispatch("users/fetchFollowing")}finally{o.value=o.value.filter((e=>e!==t))}};return(0,r.sV)((async()=>{await b(),await e.dispatch("users/fetchUsers"),await e.dispatch("users/fetchFollowing"),await e.dispatch("users/fetchFollowers")})),{currentUser:n,userInitial:l,posts:c,loading:d,loadingUsers:u,loadMorePosts:h,refreshPosts:k,handleVote:y,suggestedUsers:v,followingCount:f,followersCount:g,followUser:L,followingInProgress:o,getUserInitial:w}}};const ht=(0,P.A)(bt,[["render",Ge],["__scopeId","data-v-14556236"]]);var kt=ht;const yt={class:"login-container"},wt={class:"row justify-content-center"},Lt={class:"col-md-6 col-lg-5"},_t={class:"card shadow"},Pt={class:"card-body p-5"},Ct={key:0,class:"alert alert-danger"},Et={class:"mb-3"},xt=["disabled"],Ut={class:"mb-3"},Wt={class:"password-field"},Ft=["disabled"],Dt={class:"d-grid gap-2 mt-4"},It=["disabled"],At={key:0,class:"spinner-border spinner-border-sm me-2"},Xt={class:"text-center mt-4"},St={class:"register-link"};function $t(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",yt,[(0,r.Lk)("div",wt,[(0,r.Lk)("div",Lt,[(0,r.Lk)("div",_t,[(0,r.Lk)("div",Pt,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"text-center mb-4 app-title"},"Login",-1)),o.error?((0,r.uX)(),(0,r.CE)("div",Ct,(0,c.v_)(o.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",Et,[t[3]||(t[3]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),required:"",disabled:o.loading,placeholder:"Enter your username"},null,8,xt),[[a.Jo,o.username]])]),(0,r.Lk)("div",Ut,[t[4]||(t[4]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.Lk)("div",Wt,[(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:"",disabled:o.loading,placeholder:"Enter your password"},null,8,Ft),[[a.Jo,o.password]])])]),(0,r.Lk)("div",Dt,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg login-btn",disabled:o.loading},[o.loading?((0,r.uX)(),(0,r.CE)("span",At)):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,c.v_)(o.loading?"Logging in...":"Login"),1)],8,It)])],32),(0,r.Lk)("div",Xt,[(0,r.Lk)("p",St,[t[6]||(t[6]=(0,r.eW)(" Don't have an account? ")),(0,r.bF)(i,{to:"/register",class:"register-btn"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("Register")]))),_:1})])])])])])])])}var Vt={name:"LoginPage",setup(){const e=(0,i.Pj)(),t=(0,L.rd)(),s=(0,L.lq)(),a=(0,Ye.KR)(""),o=(0,Ye.KR)(""),n=(0,Ye.KR)(""),l=(0,r.EW)((()=>"loading"===e.state.auth.status)),c=async()=>{if(n.value="",a.value&&o.value)try{e.commit("auth/auth_request");const r=await e.dispatch("auth/login",{username:a.value,password:o.value});if(r){const e=s.query.redirect||"/";t.push(e)}else n.value="Login failed. Please check your credentials."}catch(r){if(r.response)switch(r.response.status){case 401:n.value="Invalid username or password";break;case 404:n.value="Server not found. Please check your connection.";break;case 500:n.value="Server error. Please try again later.";break;default:n.value=r.response.data?.detail||"An unexpected error occurred"}else r.request?n.value="No response from server. Please check your network connection.":n.value="Error setting up login request. Please try again.";console.error("Login error:",r),e.commit("auth/auth_error")}else n.value="Please enter both username and password"};return{username:a,password:o,error:n,loading:l,handleSubmit:c}}};const Rt=(0,P.A)(Vt,[["render",$t],["__scopeId","data-v-86de2134"]]);var qt=Rt;const jt={class:"register-container"},Kt={class:"row justify-content-center"},Ot={class:"col-md-8 col-lg-6"},Bt={class:"card shadow"},Nt={class:"card-body p-5"},Qt={key:0,class:"alert alert-danger"},Jt={class:"mb-3"},Tt=["disabled"],Mt={class:"mb-3"},Ht=["disabled"],zt={class:"mb-3"},Zt=["disabled"],Gt={class:"mb-3"},Yt=["disabled"],es={class:"mb-3"},ts=["disabled"],ss={class:"d-grid gap-2"},as=["disabled"],rs={key:0,class:"spinner-border spinner-border-sm me-2"},os={class:"text-center mt-4"};function ns(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",jt,[(0,r.Lk)("div",Kt,[(0,r.Lk)("div",Ot,[(0,r.Lk)("div",Bt,[(0,r.Lk)("div",Nt,[t[15]||(t[15]=(0,r.Lk)("h2",{class:"text-center mb-4"},"Create an Account",-1)),o.error?((0,r.uX)(),(0,r.CE)("div",Qt,(0,c.v_)(o.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",Jt,[t[6]||(t[6]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.username=e),required:"",disabled:o.loading},null,8,Tt),[[a.Jo,o.formData.username]])]),(0,r.Lk)("div",Mt,[t[7]||(t[7]=(0,r.Lk)("label",{for:"email",class:"form-label"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.email=e),required:"",disabled:o.loading},null,8,Ht),[[a.Jo,o.formData.email]])]),(0,r.Lk)("div",zt,[t[8]||(t[8]=(0,r.Lk)("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),(0,r.bo)((0,r.Lk)("input",{type:"tel",class:"form-control",id:"phone_number","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.phone_number=e),required:"",disabled:o.loading},null,8,Zt),[[a.Jo,o.formData.phone_number]])]),(0,r.Lk)("div",Gt,[t[9]||(t[9]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.password=e),required:"",disabled:o.loading},null,8,Yt),[[a.Jo,o.formData.password]]),t[10]||(t[10]=(0,r.Lk)("div",{class:"form-text"}," Password must be at least 8 characters with uppercase, lowercase, numbers, and special characters. ",-1))]),(0,r.Lk)("div",es,[t[11]||(t[11]=(0,r.Lk)("label",{for:"password_confirm",class:"form-label"},"Confirm Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password_confirm","onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.password_confirm=e),required:"",disabled:o.loading},null,8,ts),[[a.Jo,o.formData.password_confirm]])]),(0,r.Lk)("div",ss,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:o.loading},[o.loading?((0,r.uX)(),(0,r.CE)("span",rs)):(0,r.Q3)("",!0),t[12]||(t[12]=(0,r.eW)(" Register "))],8,as)])],32),(0,r.Lk)("div",os,[(0,r.Lk)("p",null,[t[14]||(t[14]=(0,r.eW)("Already have an account? ")),(0,r.bF)(i,{to:"/login"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Login")]))),_:1})])])])])])])])}var ls={name:"UserRegister",setup(){const e=(0,i.Pj)(),t=(0,L.rd)(),s=(0,Ye.Kh)({username:"",email:"",phone_number:"",password:"",password_confirm:""}),a=(0,Ye.KR)(""),o=(0,r.EW)((()=>"loading"===e.state.auth.status)),n=async()=>{if(a.value="",s.password!==s.password_confirm)return void(a.value="Passwords do not match");const r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;if(r.test(s.password))try{const a={...s,phone_number:parseInt(s.phone_number,10)},r=await e.dispatch("auth/register",a);r&&t.push("/")}catch(o){o.response&&o.response.data?a.value=o.response.data.detail||"Registration failed":a.value="Registration failed. Please try again."}else a.value="Password must be at least 8 characters with uppercase, lowercase, numbers, and special characters"};return{formData:s,error:a,loading:o,handleSubmit:n}}};const is=(0,P.A)(ls,[["render",ns],["__scopeId","data-v-9b822f14"]]);var cs=is,ds={name:"UserProfile",components:{PostCard:vt},setup(){const e=(0,i.Pj)(),t=(0,L.lq)(),s=(0,Ye.KR)(t.params.username),a=(0,Ye.KR)(!0),o=(0,Ye.KR)(!0),n=(0,Ye.KR)(!0),l=(0,Ye.KR)(!0),c=(0,Ye.KR)(!1),d=(0,Ye.KR)([]),u=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),m=(0,r.EW)((()=>e.getters["users/allUsers"])),p=(0,r.EW)((()=>e.getters["posts/allPosts"])),f=(0,r.EW)((()=>m.value.find((e=>e.username===s.value)))),g=(0,r.EW)((()=>f.value?.username?.charAt(0).toUpperCase()||"")),v=(0,r.EW)((()=>u.value.id===f.value?.id)),b=(0,r.EW)((()=>e.getters["users/followers"]||[])),h=(0,r.EW)((()=>e.getters["users/following"]||[])),k=(0,r.EW)((()=>b.value.length)),y=(0,r.EW)((()=>h.value.length)),w=(0,r.EW)((()=>!!f.value&&h.value.some((e=>e.id===f.value.id)))),_=(0,r.EW)((()=>{if(!f.value?.created_at)return"";const e=new Date(f.value.created_at);return e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})),P=async()=>{a.value=!0;try{if(0===m.value.length&&await e.dispatch("users/fetchUsers"),!f.value)try{await e.dispatch("users/fetchUserByUsername",s.value)}catch(t){console.error("User not found:",t)}}finally{a.value=!1}},C=async()=>{o.value=!0;try{await e.dispatch("posts/fetchPosts",{limit:100,skip:0,search:""}),f.value&&(d.value=p.value.filter((e=>e.owner_id===f.value.id)))}finally{o.value=!1}},E=async()=>{if(v.value){n.value=!0,l.value=!0;try{await e.dispatch("users/fetchFollowers"),await e.dispatch("users/fetchFollowing")}finally{n.value=!1,l.value=!1}}else await e.dispatch("users/fetchFollowing")},x=async()=>{if(f.value){c.value=!0;try{await e.dispatch("users/followUser",f.value.id)}finally{c.value=!1}}},U=async()=>{if(f.value){c.value=!0;try{await e.dispatch("users/unfollowUser",f.value.id)}finally{c.value=!1}}},W=async t=>{await e.dispatch("posts/votePost",t)},F=e=>e?.charAt(0).toUpperCase()||"";return(0,r.wB)((()=>t.params.username),(e=>{s.value=e,P(),C(),E()})),(0,r.sV)((async()=>{await P(),await C(),await E()})),{profile:f,loading:a,loadingPosts:o,loadingFollowers:n,loadingFollowing:l,userPosts:d,userInitial:g,isCurrentUser:v,followers:b,following:h,followersCount:k,followingCount:y,isFollowing:w,formattedJoinDate:_,followUser:x,unfollowUser:U,followActionInProgress:c,handleVote:W,getUserInitial:F}}};const us=(0,P.A)(ds,[["__scopeId","data-v-730381ae"]]);var ms=us;const ps={key:0,class:"text-center my-5"},fs={key:1,class:"alert alert-warning"},gs={key:2,class:"post-detail"},vs={class:"card mb-4"},bs={class:"card-body"},hs={class:"d-flex align-items-center mb-3"},ks={class:"bg-secondary text-white rounded-circle me-3 user-avatar"},ys={class:"mb-0"},ws={class:"text-muted"},Ls={key:0,class:"dropdown ms-auto"},_s={class:"dropdown-menu dropdown-menu-end"},Ps={class:"card-title"},Cs={class:"card-text"},Es={class:"d-flex justify-content-between align-items-center mt-4 pt-3 border-top"},xs={class:"d-flex align-items-center"},Us={class:"btn btn-outline-secondary ms-2",disabled:""},Ws={key:0},Fs={class:"card"},Ds={class:"card-header bg-white"},Is={class:"mb-0"},As={class:"card-body"},Xs={class:"mb-4"},Ss={class:"d-flex"},$s={class:"bg-primary text-white rounded-circle me-2 comment-avatar"},Vs={class:"flex-grow-1"},Rs={class:"text-end"},qs=["disabled"],js={key:0,class:"spinner-border spinner-border-sm me-1"},Ks={key:0,class:"text-center my-4"},Os={key:1,class:"text-center my-4"},Bs={key:2},Ns={class:"d-flex"},Qs={class:"bg-secondary text-white rounded-circle me-2 comment-avatar"},Js={class:"flex-grow-1"},Ts={class:"comment-bubble p-3"},Ms={class:"d-flex justify-content-between mb-1"},Hs={class:"text-muted"},zs={class:"mb-0"};function Zs(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return o.loading?((0,r.uX)(),(0,r.CE)("div",ps,t[5]||(t[5]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading post...",-1)]))):o.post?((0,r.uX)(),(0,r.CE)("div",gs,[(0,r.Lk)("div",vs,[(0,r.Lk)("div",bs,[(0,r.Lk)("div",hs,[(0,r.Lk)("div",ks,(0,c.v_)(o.ownerInitial),1),(0,r.Lk)("div",null,[(0,r.bF)(i,{to:`/profile/${o.post.owner.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("h5",ys,(0,c.v_)(o.post.owner.username),1)])),_:1},8,["to"]),(0,r.Lk)("small",ws,(0,c.v_)(o.formattedDate),1)]),o.isOwner?((0,r.uX)(),(0,r.CE)("div",Ls,[t[8]||(t[8]=(0,r.Lk)("button",{class:"btn btn-sm",type:"button","data-bs-toggle":"dropdown"},[(0,r.Lk)("i",{class:"fas fa-ellipsis-v"})],-1)),(0,r.Lk)("ul",_s,[(0,r.Lk)("li",null,[(0,r.bF)(i,{to:`/edit-post/${o.post.id}`,class:"dropdown-item"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>o.confirmDelete&&o.confirmDelete(...e)),["prevent"]))},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-2"},null,-1),(0,r.eW)(" Delete ")]))])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("h2",Ps,(0,c.v_)(o.post.title),1),(0,r.Lk)("p",Cs,(0,c.v_)(o.post.content),1),(0,r.Lk)("div",Es,[(0,r.Lk)("div",xs,[(0,r.Lk)("button",{class:(0,c.C4)(["btn",{"btn-primary":o.post.hasVoted,"btn-outline-primary":!o.post.hasVoted}]),onClick:t[1]||(t[1]=(...e)=>o.vote&&o.vote(...e))},[t[9]||(t[9]=(0,r.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(o.post.votes||0),1)],2),(0,r.Lk)("button",Us,[t[10]||(t[10]=(0,r.Lk)("i",{class:"fas fa-comment me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(o.comments.length),1)])]),o.isOwner?((0,r.uX)(),(0,r.CE)("div",Ws,[(0,r.bF)(i,{to:`/edit-post/${o.post.id}`,class:"btn btn-primary"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.confirmDelete&&o.confirmDelete(...e)),class:"btn btn-danger ms-2"},t[12]||(t[12]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-1"},null,-1),(0,r.eW)(" Delete ")]))])):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",Fs,[(0,r.Lk)("div",Ds,[(0,r.Lk)("h5",Is,"Comments ("+(0,c.v_)(o.comments.length)+")",1)]),(0,r.Lk)("div",As,[(0,r.Lk)("div",Xs,[(0,r.Lk)("div",Ss,[(0,r.Lk)("div",$s,(0,c.v_)(o.currentUserInitial),1),(0,r.Lk)("div",Vs,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newComment=e),class:"form-control mb-2",rows:"2",placeholder:"Write a comment..."},null,512),[[a.Jo,o.newComment]]),(0,r.Lk)("div",Rs,[(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.addComment&&o.addComment(...e)),class:"btn btn-primary",disabled:!o.newComment.trim()||o.commentLoading},[o.commentLoading?((0,r.uX)(),(0,r.CE)("span",js)):(0,r.Q3)("",!0),t[13]||(t[13]=(0,r.eW)(" Post Comment "))],8,qs)])])])]),o.commentsLoading?((0,r.uX)(),(0,r.CE)("div",Ks,t[14]||(t[14]=[(0,r.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading comments...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading comments...",-1)]))):0===o.comments.length?((0,r.uX)(),(0,r.CE)("div",Os,t[15]||(t[15]=[(0,r.Lk)("p",{class:"text-muted"},"No comments yet. Be the first to comment!",-1)]))):((0,r.uX)(),(0,r.CE)("div",Bs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.comments,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"comment mb-3"},[(0,r.Lk)("div",Ns,[(0,r.Lk)("div",Qs,(0,c.v_)(o.getInitial(e.user.username)),1),(0,r.Lk)("div",Js,[(0,r.Lk)("div",Ts,[(0,r.Lk)("div",Ms,[(0,r.bF)(i,{to:`/profile/${e.user.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,c.v_)(e.user.username),1)])),_:2},1032,["to"]),(0,r.Lk)("small",Hs,(0,c.v_)(o.formatDate(e.created_at)),1)]),(0,r.Lk)("p",zs,(0,c.v_)(e.content),1)])])])])))),128))]))])])])):((0,r.uX)(),(0,r.CE)("div",fs," Post not found or has been deleted. "))}var Gs={name:"PostDetail",setup(){const e=(0,i.Pj)(),t=(0,L.lq)(),s=(0,L.rd)(),a=parseInt(t.params.id),o=(0,Ye.KR)(!0),n=(0,Ye.KR)(!0),l=(0,Ye.KR)(!1),c=(0,Ye.KR)(""),d=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),u=(0,r.EW)((()=>d.value.username?.charAt(0).toUpperCase()||"")),m=(0,r.EW)((()=>e.getters["posts/getCurrentPost"])),p=(0,r.EW)((()=>e.getters["comments/getCommentsByPostId"](a)||[])),f=(0,r.EW)((()=>d.value.id===m.value?.owner_id)),g=(0,r.EW)((()=>m.value?.owner?.username?.charAt(0).toUpperCase()||"")),v=(0,r.EW)((()=>{if(!m.value?.created_at)return"";const e=new Date(m.value.created_at);return e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})),b=e=>e?.charAt(0).toUpperCase()||"",h=e=>{const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},k=async()=>{o.value=!0;try{await e.dispatch("posts/fetchPostById",a)}finally{o.value=!1}},y=async()=>{n.value=!0;try{await e.dispatch("comments/fetchComments",a)}finally{n.value=!1}},w=async()=>{await e.dispatch("posts/votePost",a)},_=async()=>{if(c.value.trim()){l.value=!0;try{await e.dispatch("comments/createComment",{postId:a,content:c.value}),c.value=""}finally{l.value=!1}}},P=async()=>{if(confirm("Are you sure you want to delete this post?")){const t=await e.dispatch("posts/deletePost",a);t&&s.push("/")}};return(0,r.sV)((async()=>{await k(),await y()})),{post:m,loading:o,commentsLoading:n,commentLoading:l,comments:p,newComment:c,currentUser:d,currentUserInitial:u,isOwner:f,ownerInitial:g,formattedDate:v,getInitial:b,formatDate:h,vote:w,addComment:_,confirmDelete:P}}};const Ys=(0,P.A)(Gs,[["render",Zs],["__scopeId","data-v-4f67123e"]]);var ea=Ys;const ta={class:"row justify-content-center"},sa={class:"col-lg-8"},aa={class:"card shadow"},ra={class:"card-body"},oa={key:0,class:"alert alert-danger"},na={class:"mb-3"},la=["disabled"],ia={class:"mb-3"},ca=["disabled"],da={class:"mb-3 form-check"},ua=["disabled"],ma={class:"d-flex justify-content-between"},pa=["disabled"],fa={key:0,class:"spinner-border spinner-border-sm me-2"};function ga(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ta,[(0,r.Lk)("div",sa,[(0,r.Lk)("div",aa,[t[9]||(t[9]=(0,r.Lk)("div",{class:"card-header bg-white"},[(0,r.Lk)("h5",{class:"mb-0"},"Create New Post")],-1)),(0,r.Lk)("div",ra,[o.error?((0,r.uX)(),(0,r.CE)("div",oa,(0,c.v_)(o.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",na,[t[4]||(t[4]=(0,r.Lk)("label",{for:"title",class:"form-label"},"Title",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.title=e),required:"",disabled:o.loading,placeholder:"Enter a title for your post"},null,8,la),[[a.Jo,o.formData.title]])]),(0,r.Lk)("div",ia,[t[5]||(t[5]=(0,r.Lk)("label",{for:"content",class:"form-label"},"Content",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.content=e),rows:"8",required:"",disabled:o.loading,placeholder:"Write your post content here..."},null,8,ca),[[a.Jo,o.formData.content]])]),(0,r.Lk)("div",da,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",class:"form-check-input",id:"published","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.published=e),disabled:o.loading},null,8,ua),[[a.lH,o.formData.published]]),t[6]||(t[6]=(0,r.Lk)("label",{class:"form-check-label",for:"published"},"Publish this post",-1))]),(0,r.Lk)("div",ma,[(0,r.bF)(i,{to:"/",class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" Cancel ")]))),_:1}),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:o.loading||!o.isFormValid},[o.loading?((0,r.uX)(),(0,r.CE)("span",fa)):(0,r.Q3)("",!0),t[8]||(t[8]=(0,r.eW)(" Create Post "))],8,pa)])],32)])])])])}var va={name:"CreatePost",setup(){const e=(0,i.Pj)(),t=(0,L.rd)(),s=(0,Ye.Kh)({title:"",content:"",published:!0}),a=(0,Ye.KR)(""),o=(0,Ye.KR)(!1),n=(0,r.EW)((()=>s.title.trim()&&s.content.trim())),l=async()=>{if(n.value){o.value=!0,a.value="";try{const r=await e.dispatch("posts/createPost",s);r?t.push(`/posts/${r.id}`):a.value="Failed to create post. Please try again."}catch(r){a.value=r.response?.data?.detail||"Failed to create post"}finally{o.value=!1}}};return{formData:s,error:a,loading:o,isFormValid:n,handleSubmit:l}}};const ba=(0,P.A)(va,[["render",ga]]);var ha=ba;const ka={class:"row justify-content-center"},ya={class:"col-lg-8"},wa={key:0,class:"text-center my-5"},La={key:1,class:"alert alert-warning"},_a={key:2,class:"card shadow"},Pa={class:"card-body"},Ca={key:0,class:"alert alert-danger"},Ea={class:"mb-3"},xa=["disabled"],Ua={class:"mb-3"},Wa=["disabled"],Fa={class:"mb-3 form-check"},Da=["disabled"],Ia={class:"d-flex justify-content-between"},Aa=["disabled"],Xa={key:0,class:"spinner-border spinner-border-sm me-2"};function Sa(e,t,s,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ka,[(0,r.Lk)("div",ya,[o.loading?((0,r.uX)(),(0,r.CE)("div",wa,t[4]||(t[4]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading post...",-1)]))):o.post?((0,r.uX)(),(0,r.CE)("div",_a,[t[10]||(t[10]=(0,r.Lk)("div",{class:"card-header bg-white"},[(0,r.Lk)("h5",{class:"mb-0"},"Edit Post")],-1)),(0,r.Lk)("div",Pa,[o.error?((0,r.uX)(),(0,r.CE)("div",Ca,(0,c.v_)(o.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",Ea,[t[5]||(t[5]=(0,r.Lk)("label",{for:"title",class:"form-label"},"Title",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.title=e),required:"",disabled:o.saving},null,8,xa),[[a.Jo,o.formData.title]])]),(0,r.Lk)("div",Ua,[t[6]||(t[6]=(0,r.Lk)("label",{for:"content",class:"form-label"},"Content",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.content=e),rows:"8",required:"",disabled:o.saving},null,8,Wa),[[a.Jo,o.formData.content]])]),(0,r.Lk)("div",Fa,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",class:"form-check-input",id:"published","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.published=e),disabled:o.saving},null,8,Da),[[a.lH,o.formData.published]]),t[7]||(t[7]=(0,r.Lk)("label",{class:"form-check-label",for:"published"},"Published",-1))]),(0,r.Lk)("div",Ia,[(0,r.bF)(i,{to:`/posts/${o.postId}`,class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)(" Cancel ")]))),_:1},8,["to"]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:o.saving||!o.isFormValid},[o.saving?((0,r.uX)(),(0,r.CE)("span",Xa)):(0,r.Q3)("",!0),t[9]||(t[9]=(0,r.eW)(" Save Changes "))],8,Aa)])],32)])])):((0,r.uX)(),(0,r.CE)("div",La," Post not found or has been deleted. "))])])}var $a={name:"EditPost",setup(){const e=(0,i.Pj)(),t=(0,L.lq)(),s=(0,L.rd)(),a=parseInt(t.params.id),o=(0,Ye.KR)(!0),n=(0,Ye.KR)(!1),l=(0,Ye.KR)(""),c=(0,Ye.Kh)({title:"",content:"",published:!0}),d=(0,r.EW)((()=>e.getters["posts/getCurrentPost"])),u=(0,r.EW)((()=>c.title.trim()&&c.content.trim()));(0,r.wB)(d,(e=>{e&&(c.title=e.title,c.content=e.content,c.published=e.published)}));const m=async()=>{o.value=!0;try{await e.dispatch("posts/fetchPostById",a);const t=e.getters["auth/currentUser"];d.value&&d.value.owner_id!==t.id&&s.push(`/posts/${a}`)}finally{o.value=!1}},p=async()=>{if(u.value){n.value=!0,l.value="";try{const t=await e.dispatch("posts/updatePost",{id:a,postData:{title:c.title,content:c.content,published:c.published}});t?s.push(`/posts/${a}`):l.value="Failed to update post. Please try again."}catch(t){l.value=t.response?.data?.detail||"Failed to update post"}finally{n.value=!1}}};return(0,r.sV)(m),{post:d,postId:a,formData:c,loading:o,saving:n,error:l,isFormValid:u,handleSubmit:p}}};const Va=(0,P.A)($a,[["render",Sa]]);var Ra=Va;const qa={class:"not-found text-center py-5"},ja={class:"container"};function Ka(e,t,s,a,o,n){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",qa,[(0,r.Lk)("div",ja,[t[1]||(t[1]=(0,r.Lk)("i",{class:"fas fa-search fa-4x text-muted mb-4"},null,-1)),t[2]||(t[2]=(0,r.Lk)("h1",{class:"display-4"},"Page Not Found",-1)),t[3]||(t[3]=(0,r.Lk)("p",{class:"lead"},"The page you're looking for doesn't exist or has been moved.",-1)),(0,r.bF)(l,{to:"/",class:"btn btn-primary btn-lg mt-3"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-home me-2"},null,-1),(0,r.eW)(" Go Home ")]))),_:1})])])}var Oa={name:"NotFound"};const Ba=(0,P.A)(Oa,[["render",Ka]]);var Na=Ba;const Qa=[{path:"/",name:"Home",component:kt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:qt,meta:{guestOnly:!0}},{path:"/register",name:"Register",component:cs,meta:{guestOnly:!0}},{path:"/profile/:username",name:"Profile",component:ms,meta:{requiresAuth:!0}},{path:"/posts/:id",name:"PostDetail",component:ea,meta:{requiresAuth:!0}},{path:"/create-post",name:"CreatePost",component:ha,meta:{requiresAuth:!0}},{path:"/edit-post/:id",name:"EditPost",component:Ra,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Na}],Ja=(0,L.aE)({history:(0,L.LA)("/social_media_platform-fronted/"),routes:Qa});Ja.beforeEach(((e,t,s)=>{const a=ue.getters["auth/isAuthenticated"];e.matched.some((e=>e.meta.requiresAuth))?a?s():s({name:"Login",query:{redirect:e.fullPath.replace("/social_media_platform-fronted","")}}):e.matched.some((e=>e.meta.guestOnly))&&a?s({name:"Home"}):s()}));var Ta=Ja;s(323);const Ma=(0,a.Ef)($);Ma.use(ue),Ma.use(Ta),Ma.config.errorHandler=(e,t,s)=>{console.error("Vue Error:",e),console.error("Info:",s)},Ma.mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,o){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,i=0;i<a.length;i++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,n=a[0],l=a[1],i=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(i)var d=i(s)}for(t&&t(a);c<n.length;c++)o=n[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunksocial_media_frontend"]=self["webpackChunksocial_media_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(2248)}));a=s.O(a)})();
//# sourceMappingURL=app.588b7ca7.js.map