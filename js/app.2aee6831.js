(function(){"use strict";var e={2835:function(e,t,s){var a=s(5130),r=s(6768);const l={id:"app"},o={class:"container py-4"};function n(e,t,s,a,n,i){const c=(0,r.g2)("Navbar"),d=(0,r.g2)("router-view"),u=(0,r.g2)("AppFooter");return(0,r.uX)(),(0,r.CE)("div",l,[a.isAuthenticated?((0,r.uX)(),(0,r.Wv)(c,{key:0})):(0,r.Q3)("",!0),(0,r.Lk)("main",o,[(0,r.bF)(d)]),(0,r.bF)(u)])}var i=s(782),c=s(4232);const d={class:"navbar navbar-expand-lg navbar-light bg-light fixed-top"},u={class:"container"},m={class:"collapse navbar-collapse",id:"navbarNav"},p={class:"navbar-nav me-auto mb-2 mb-lg-0"},v={class:"nav-item"},f={class:"nav-item"},k={key:0,class:"nav-item"},g={class:"d-flex"},b={key:0},h={key:1,class:"dropdown"},y={class:"btn btn-outline-secondary dropdown-toggle",type:"button",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},L={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"userDropdown"};function w(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("nav",d,[(0,r.Lk)("div",u,[(0,r.bF)(i,{class:"navbar-brand",to:"/"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("i",{class:"fas fa-share-alt me-2"},null,-1),(0,r.eW)(" SocialConnect ")]))),_:1}),t[16]||(t[16]=(0,r.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,r.Lk)("div",m,[(0,r.Lk)("ul",p,[(0,r.Lk)("li",v,[(0,r.bF)(i,{class:"nav-link",to:"/",exact:""},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("i",{class:"fas fa-home me-1"},null,-1),(0,r.eW)(" Home ")]))),_:1})]),(0,r.Lk)("li",f,[(0,r.bF)(i,{class:"nav-link",to:"/reels"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"fas fa-film me-1"},null,-1),(0,r.eW)(" Reels ")]))),_:1})]),l.isAuthenticated?((0,r.uX)(),(0,r.CE)("li",k,[(0,r.bF)(i,{class:"nav-link",to:`/profile/${l.currentUser.username}`},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-user me-1"},null,-1),(0,r.eW)(" Profile ")]))),_:1},8,["to"])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",g,[(0,r.Lk)("form",{class:"d-flex me-2",onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{class:"form-control me-2",type:"search",placeholder:"Search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e)},null,512),[[a.Jo,l.searchQuery]]),t[7]||(t[7]=(0,r.Lk)("button",{class:"btn btn-outline-primary",type:"submit"},[(0,r.Lk)("i",{class:"fas fa-search"})],-1))],32),l.isAuthenticated?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("button",y,[t[10]||(t[10]=(0,r.Lk)("i",{class:"fas fa-user-circle me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(l.currentUser.username),1)]),(0,r.Lk)("ul",L,[(0,r.Lk)("li",null,[(0,r.bF)(i,{class:"dropdown-item",to:`/profile/${l.currentUser.username}`},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-user me-2"},null,-1),(0,r.eW)(" My Profile ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.bF)(i,{class:"dropdown-item",to:"/create-post"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Create Post ")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(i,{class:"dropdown-item",to:"/create-reel"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.Lk)("i",{class:"fas fa-film me-2"},null,-1),(0,r.eW)(" Create Reel ")]))),_:1})]),t[15]||(t[15]=(0,r.Lk)("li",null,[(0,r.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,r.Lk)("li",null,[(0,r.Lk)("button",{class:"dropdown-item text-danger",onClick:t[2]||(t[2]=(...e)=>l.logout&&l.logout(...e))},t[14]||(t[14]=[(0,r.Lk)("i",{class:"fas fa-sign-out-alt me-2"},null,-1),(0,r.eW)(" Logout ")]))])])])):((0,r.uX)(),(0,r.CE)("div",b,[(0,r.bF)(i,{to:"/login",class:"btn btn-outline-primary me-2"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("Login")]))),_:1}),(0,r.bF)(i,{to:"/register",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("Register")]))),_:1})]))])])])]),t[17]||(t[17]=(0,r.Lk)("div",{style:{height:"60px"}},null,-1))],64)}s(4114);var _=s(144),C=s(1387),E={name:"NavBar",setup(){const e=(0,i.Pj)(),t=(0,C.rd)(),s=(0,_.KR)(""),a=(0,r.EW)((()=>e.getters["auth/isAuthenticated"])),l=(0,r.EW)((()=>e.getters["auth/currentUser"])),o=()=>{e.dispatch("auth/logout")},n=()=>{s.value.trim()&&(t.push({path:"/",query:{search:s.value.trim()}}),s.value="")};return{searchQuery:s,isAuthenticated:a,currentUser:l,logout:o,handleSearch:n}}},R=s(1241);const x=(0,R.A)(E,[["render",w],["__scopeId","data-v-d30f2116"]]);var P=x;const F={class:"bg-light text-center py-3 mt-auto"},W={class:"container"},U={class:"mb-0"};function D(e,t,s,a,l,o){return(0,r.uX)(),(0,r.CE)("footer",F,[(0,r.Lk)("div",W,[(0,r.Lk)("p",U,"Â© "+(0,c.v_)(l.currentYear)+" SocialApp. All rights reserved.",1)])])}var I={data(){return{currentYear:(new Date).getFullYear()}}};const A=(0,R.A)(I,[["render",D]]);var X=A,$={name:"App",components:{Navbar:P,AppFooter:X},setup(){const e=(0,i.Pj)(),t=(0,r.EW)((()=>e.getters["auth/isAuthenticated"]));return(0,r.sV)((async()=>{t.value&&await e.dispatch("auth/fetchCurrentUser")})),{isAuthenticated:t}}};const S=(0,R.A)($,[["render",n]]);var V=S,K=(s(8111),s(3579),s(4373));const q=K.A.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});q.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>Promise.reject(e))),q.interceptors.response.use((e=>e),(e=>{if(console.error("API Interceptor Error:",{message:e.message,code:e.code,response:e.response,request:e.request}),"ERR_NETWORK"===e.code&&console.error("Network Error: Unable to connect to the server"),e.response)switch(e.response.status){case 401:localStorage.removeItem("token"),go.push("/login");break;case 403:console.error("Access Forbidden");break;case 404:console.error("Resource Not Found");break;case 500:console.error("Internal Server Error");break}return Promise.reject(e)}));var j=q,B={login(e,t){const s=new URLSearchParams;return s.append("username",e),s.append("password",t),console.log("Login Request Details:",{url:"/users/login",method:"POST",data:{username:e}}),j.post("/users/login",s.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).catch((e=>{throw console.error("Detailed Login Error:",{message:e.message,code:e.code,response:e.response,request:e.request,config:e.config}),e}))},register(e){return j.post("/users/",e)},getCurrentUser(){return j.get("/users/me")}};const O={token:localStorage.getItem("token")||"",user:JSON.parse(localStorage.getItem("user"))||null,status:""},Q={isAuthenticated:e=>!!e.token,authStatus:e=>e.status,currentUser:e=>e.user},T={async login({commit:e},{username:t,password:s}){e("auth_request");try{console.log("Login action started with username:",t);const r=await B.login(t,s);console.log("Login response received:",r.data);const l=r.data.access_token;if(!l)return console.error("No token in response:",r.data),e("auth_error"),!1;localStorage.setItem("token",l),e("auth_success",l);try{return await e("fetchCurrentUser"),!0}catch(a){return console.error("Error fetching user profile:",a),!0}}catch(r){return console.error("Login error:",r.response?r.response.data:r),e("auth_error"),localStorage.removeItem("token"),!1}},async register({commit:e,dispatch:t},s){e("auth_request");try{return await B.register(s),t("login",{username:s.username,password:s.password})}catch(a){return e("auth_error"),!1}},async fetchCurrentUser({commit:e}){try{const t=await B.getCurrentUser(),s=t.data;return localStorage.setItem("user",JSON.stringify(s)),e("set_user",s),s}catch(t){return console.error("Failed to fetch user profile:",t),e("auth_error"),null}},logout({commit:e}){localStorage.removeItem("token"),localStorage.removeItem("user"),e("logout"),go.push("/login")}},M={auth_request(e){e.status="loading"},auth_success(e,t){e.status="success",e.token=t},auth_error(e){e.status="error",e.token=""},set_user(e,t){e.user=t},logout(e){e.status="",e.token="",e.user=null}};var N={namespaced:!0,state:O,getters:Q,actions:T,mutations:M},J=(s(2489),s(116),{getPosts(e=10,t=0,s=""){return j.get(`/posts/?limit=${e}&skip=${t}&search=${s}`)},getPostById(e){return j.get(`/posts/${e}`)},getLatestPost(){return j.get("/posts/latest")},createPost(e){return j.post("/posts/",e)},updatePost(e,t){return j.put(`/posts/${e}`,t)},deletePost(e){return j.delete(`/posts/${e}`)},votePost(e){return j.post("/vote/",{post_id:e})}});const H={posts:[],currentPost:null,loading:!1,error:null},z={allPosts:e=>e.posts,getPostById:e=>t=>e.posts.find((e=>e.id===t)),getCurrentPost:e=>e.currentPost},Y={async fetchPosts({commit:e},{limit:t,skip:s,search:a}){e("set_loading",!0);try{const r=await J.getPosts(t,s,a);e("set_posts",r.data)}catch(r){e("set_error",r.message)}finally{e("set_loading",!1)}},async fetchPostById({commit:e},t){e("set_loading",!0);try{const s=await J.getPostById(t);return e("set_current_post",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async createPost({commit:e},t){e("set_loading",!0);try{const s=await J.createPost(t);return e("add_post",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async updatePost({commit:e},{id:t,postData:s}){e("set_loading",!0);try{const a=await J.updatePost(t,s);return e("update_post",a.data),H.currentPost&&H.currentPost.id===t&&e("set_current_post",a.data),a.data}catch(a){return e("set_error",a.message),null}finally{e("set_loading",!1)}},async deletePost({commit:e},t){e("set_loading",!0);try{return await J.deletePost(t),e("remove_post",t),!0}catch(s){return e("set_error",s.message),!1}finally{e("set_loading",!1)}},async votePost({commit:e},t){try{return await J.votePost(t),e("toggle_vote",t),!0}catch(s){return e("set_error",s.message),!1}}},Z={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_posts(e,t){e.posts=t},add_post(e,t){e.posts.unshift(t)},set_current_post(e,t){e.currentPost=t},update_post(e,t){const s=e.posts.findIndex((e=>e.id===t.id));-1!==s&&e.posts.splice(s,1,t)},remove_post(e,t){e.posts=e.posts.filter((e=>e.id!==t)),e.currentPost&&e.currentPost.id===t&&(e.currentPost=null)},toggle_vote(e,t){const s=e.posts.find((e=>e.id===t));s&&(s.votes=s.hasVoted?s.votes-1:s.votes+1,s.hasVoted=!s.hasVoted),e.currentPost&&e.currentPost.id===t&&(e.currentPost.votes=e.currentPost.hasVoted?e.currentPost.votes-1:e.currentPost.votes+1,e.currentPost.hasVoted=!e.currentPost.hasVoted)}};var G={namespaced:!0,state:H,getters:z,actions:Y,mutations:Z},ee={getComments(e){return j.get(`/posts/${e}/comments`)},createComment(e,t){return j.post(`/posts/${e}/comment`,{content:t})}};const te={comments:{},loading:!1,error:null},se={getCommentsByPostId:e=>t=>e.comments[t]||[]},ae={async fetchComments({commit:e},t){e("set_loading",!0);try{const s=await ee.getComments(t);return e("set_comments",{postId:t,comments:s.data}),s.data}catch(s){return e("set_error",s.message),[]}finally{e("set_loading",!1)}},async createComment({commit:e,dispatch:t},{postId:s,content:a}){e("set_loading",!0);try{const e=await ee.createComment(s,a);return await t("fetchComments",s),e.data}catch(r){return e("set_error",r.message),null}finally{e("set_loading",!1)}}},re={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_comments(e,{postId:t,comments:s}){e.comments={...e.comments,[t]:s}},add_comment(e,{postId:t,comment:s}){e.comments[t]||(e.comments[t]=[]),e.comments[t].push(s)}};var le={namespaced:!0,state:te,getters:se,actions:ae,mutations:re},oe={getUsers(){return j.get("/users/")},getUserById(e){return j.get(`/users/id/${e}`)},getUserByUsername(e){return j.get(`/users/username/${e}`)},updateUser(e,t){return j.put(`/users/${e}`,t)},deleteUser(e){return j.delete(`/users/${e}`)}},ne={followUser(e){return j.post(`/users/follow/${e}`)},unfollowUser(e){return j.post(`/users/unfollow/${e}`)},getFollowers(){return j.get("/users/followers")},getFollowing(){return j.get("/users/following")}};const ie={users:[],userProfiles:{},followers:[],following:[],loading:!1,error:null},ce={allUsers:e=>e.users,getUserById:e=>t=>e.userProfiles[t],followers:e=>e.followers,following:e=>e.following},de={async fetchUsers({commit:e}){e("set_loading",!0);try{const t=await oe.getUsers();return e("set_users",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async fetchUserById({commit:e},t){e("set_loading",!0);try{const s=await oe.getUserById(t);return e("set_user_profile",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async fetchUserByUsername({commit:e},t){e("set_loading",!0);try{const s=await oe.getUserByUsername(t);return e("set_user_profile",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async fetchFollowers({commit:e}){e("set_loading",!0);try{const t=await ne.getFollowers();return e("set_followers",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async fetchFollowing({commit:e}){e("set_loading",!0);try{const t=await ne.getFollowing();return e("set_following",t.data),t.data}catch(t){return e("set_error",t.message),[]}finally{e("set_loading",!1)}},async followUser({commit:e,dispatch:t},s){try{return await ne.followUser(s),await t("fetchFollowing"),!0}catch(a){return e("set_error",a.message),!1}},async unfollowUser({commit:e,dispatch:t},s){try{return await ne.unfollowUser(s),await t("fetchFollowing"),!0}catch(a){return e("set_error",a.message),!1}}},ue={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_users(e,t){e.users=t},set_user_profile(e,t){e.userProfiles={...e.userProfiles,[t.id]:t}},set_followers(e,t){e.followers=t},set_following(e,t){e.following=t}};var me={namespaced:!0,state:ie,getters:ce,actions:de,mutations:ue},pe={getReels(e=10,t=0,s=null){const a=s?`&user_id=${s}`:"";return j.get(`/reels/?limit=${e}&skip=${t}${a}`)},getReelById(e){return j.get(`/reels/${e}`)},createReel(e){const t=new FormData;return t.append("title",e.title),t.append("description",e.description),t.append("video_file",e.videoFile),j.post("/reels/",t,{headers:{"Content-Type":"multipart/form-data"}})},updateReel(e,t){const s=new FormData;return s.append("title",t.title),s.append("description",t.description),t.videoFile&&s.append("video_file",t.videoFile),j.put(`/reels/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})},deleteReel(e){return j.delete(`/reels/${e}`)},likeReel(e){return j.post("/reels/like/",{reel_id:e})},commentOnReel(e,t){return j.post(`/reels/${e}/comment`,{content:t})},getReelComments(e){return j.get(`/reels/${e}/comments`)}};const ve={reels:[],currentReel:null,loading:!1,error:null,reelComments:{}},fe={allReels:e=>e.reels,getCurrentReel:e=>e.currentReel,getReelComments:e=>t=>e.reelComments[t]||[]},ke={async fetchReels({commit:e},{limit:t=10,skip:s=0,userId:a=null}){e("set_loading",!0);try{const r=await pe.getReels(t,s,a);return e("set_reels",r.data),r.data}catch(r){return e("set_error",r.message),[]}finally{e("set_loading",!1)}},async fetchReelById({commit:e},t){e("set_loading",!0);try{const s=await pe.getReelById(t);return e("set_current_reel",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async createReel({commit:e},t){e("set_loading",!0);try{const s=await pe.createReel(t);return e("add_reel",s.data),s.data}catch(s){return e("set_error",s.message),null}finally{e("set_loading",!1)}},async updateReel({commit:e},{id:t,reelData:s}){e("set_loading",!0);try{const a=await pe.updateReel(t,s);return e("update_reel",a.data),ve.currentReel&&ve.currentReel.id===t&&e("set_current_reel",a.data),a.data}catch(a){return e("set_error",a.message),null}finally{e("set_loading",!1)}},async deleteReel({commit:e},t){e("set_loading",!0);try{return await pe.deleteReel(t),e("remove_reel",t),!0}catch(s){return e("set_error",s.message),!1}finally{e("set_loading",!1)}},async likeReel({commit:e},t){try{return await pe.likeReel(t),e("toggle_reel_like",t),!0}catch(s){return e("set_error",s.message),!1}},async fetchReelComments({commit:e},t){try{const s=await pe.getReelComments(t);return e("set_reel_comments",{reelId:t,comments:s.data}),s.data}catch(s){return e("set_error",s.message),[]}},async commentOnReel({commit:e,dispatch:t},{reelId:s,content:a}){try{return await pe.commentOnReel(s,a),await t("fetchReelComments",s),!0}catch(r){return e("set_error",r.message),!1}}},ge={set_loading(e,t){e.loading=t},set_error(e,t){e.error=t},set_reels(e,t){e.reels=t},add_reel(e,t){e.reels.unshift(t)},set_current_reel(e,t){e.currentReel=t},update_reel(e,t){const s=e.reels.findIndex((e=>e.id===t.id));-1!==s&&e.reels.splice(s,1,t)},remove_reel(e,t){e.reels=e.reels.filter((e=>e.id!==t)),e.currentReel&&e.currentReel.id===t&&(e.currentReel=null)},toggle_reel_like(e,t){const s=e.reels.find((e=>e.id===t));s&&(s.likes=s.is_liked?s.likes-1:s.likes+1,s.is_liked=!s.is_liked),e.currentReel&&e.currentReel.id===t&&(e.currentReel.likes=e.currentReel.is_liked?e.currentReel.likes-1:e.currentReel.likes+1,e.currentReel.is_liked=!e.currentReel.is_liked)},set_reel_comments(e,{reelId:t,comments:s}){e.reelComments={...e.reelComments,[t]:s}}};var be={namespaced:!0,state:ve,getters:fe,actions:ke,mutations:ge},he=(0,i.y$)({modules:{auth:N,posts:G,comments:le,users:me,reels:be}});const ye={class:"home-container"},Le={class:"row"},we={class:"col-lg-3 d-none d-lg-block"},_e={class:"card mb-4"},Ce={class:"card-body"},Ee={class:"d-flex flex-column align-items-center text-center mb-3"},Re={class:"user-avatar user-avatar-lg bg-primary text-white rounded-circle mb-2"},xe={class:"mb-0"},Pe={class:"text-muted mb-1"},Fe={class:"d-flex justify-content-around mb-2"},We={class:"text-center"},Ue={class:"text-center"},De={class:"d-grid"},Ie={class:"card"},Ae={class:"card-body"},Xe={class:"list-group list-group-flush"},$e={class:"col-lg-6 col-md-8"},Se={class:"card mb-4"},Ve={class:"card-body"},Ke={class:"d-flex align-items-center mb-3"},qe={class:"user-avatar user-avatar-sm bg-primary text-white rounded-circle me-2"},je={class:"d-flex justify-content-around"},Be={key:0,class:"text-center my-5"},Oe={key:1,class:"card"},Qe={class:"card-body text-center py-5"},Te={key:2},Me={key:3,class:"text-center my-4"},Ne=["disabled"],Je={key:0,class:"spinner-border spinner-border-sm me-2"},He={class:"col-lg-3 col-md-4 d-none d-md-block"},ze={class:"card mb-4"},Ye={class:"card-body"},Ze={key:0,class:"text-center my-3"},Ge={key:1,class:"text-muted text-center"},et={key:2},tt={class:"user-avatar user-avatar-sm bg-secondary text-white rounded-circle me-2"},st={class:"flex-grow-1"},at=["onClick","disabled"],rt={key:0,class:"spinner-border spinner-border-sm"},lt={key:1};function ot(e,t,s,l,o,n){const i=(0,r.g2)("router-link"),d=(0,r.g2)("post-card");return(0,r.uX)(),(0,r.CE)("div",ye,[(0,r.Lk)("div",Le,[(0,r.Lk)("div",we,[(0,r.Lk)("div",_e,[(0,r.Lk)("div",Ce,[(0,r.Lk)("div",Ee,[(0,r.Lk)("div",Re,(0,c.v_)(l.userInitial),1),(0,r.Lk)("h5",xe,(0,c.v_)(l.currentUser.username),1),(0,r.Lk)("p",Pe,(0,c.v_)(l.currentUser.email),1)]),(0,r.Lk)("div",Fe,[(0,r.Lk)("div",We,[(0,r.Lk)("h6",null,(0,c.v_)(l.followingCount),1),t[2]||(t[2]=(0,r.Lk)("small",{class:"text-muted"},"Following",-1))]),(0,r.Lk)("div",Ue,[(0,r.Lk)("h6",null,(0,c.v_)(l.followersCount),1),t[3]||(t[3]=(0,r.Lk)("small",{class:"text-muted"},"Followers",-1))])]),(0,r.Lk)("div",De,[(0,r.bF)(i,{to:`/profile/${l.currentUser.username}`,class:"btn btn-outline-primary"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)(" View Profile ")]))),_:1},8,["to"])])])]),(0,r.Lk)("div",Ie,[(0,r.Lk)("div",Ae,[t[8]||(t[8]=(0,r.Lk)("h5",{class:"card-title"},"Quick Links",-1)),(0,r.Lk)("div",Xe,[(0,r.bF)(i,{to:"/",class:"list-group-item list-group-item-action"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"fas fa-home me-2"},null,-1),(0,r.eW)(" Home ")]))),_:1}),(0,r.bF)(i,{to:"/create-post",class:"list-group-item list-group-item-action"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Create Post ")]))),_:1}),(0,r.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>l.refreshPosts&&l.refreshPosts(...e)),["prevent"])),class:"list-group-item list-group-item-action"},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-sync-alt me-2"},null,-1),(0,r.eW)(" Refresh Feed ")]))])])])]),(0,r.Lk)("div",$e,[(0,r.Lk)("div",Se,[(0,r.Lk)("div",Ve,[(0,r.Lk)("div",Ke,[(0,r.Lk)("div",qe,(0,c.v_)(l.userInitial),1),(0,r.bF)(i,{to:"/create-post",class:"form-control text-start text-muted"},{default:(0,r.k6)((()=>[(0,r.eW)(" What's on your mind, "+(0,c.v_)(l.currentUser.username)+"? ",1)])),_:1})]),(0,r.Lk)("div",je,[(0,r.bF)(i,{to:"/create-post",class:"btn btn-outline-primary flex-grow-1 mx-1"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Create Post ")]))),_:1})])])]),l.loading?((0,r.uX)(),(0,r.CE)("div",Be,t[10]||(t[10]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading posts...",-1)]))):0===l.posts.length?((0,r.uX)(),(0,r.CE)("div",Oe,[(0,r.Lk)("div",Qe,[t[12]||(t[12]=(0,r.Lk)("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),t[13]||(t[13]=(0,r.Lk)("h5",null,"No posts yet",-1)),t[14]||(t[14]=(0,r.Lk)("p",{class:"text-muted"},"Start by creating a post or following users.",-1)),(0,r.bF)(i,{to:"/create-post",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Create Post ")]))),_:1})])])):((0,r.uX)(),(0,r.CE)("div",Te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.posts,(e=>((0,r.uX)(),(0,r.Wv)(d,{key:e.id,post:e,onVote:l.handleVote},null,8,["post","onVote"])))),128))])),l.posts.length>0?((0,r.uX)(),(0,r.CE)("div",Me,[(0,r.Lk)("button",{class:"btn btn-outline-primary",onClick:t[1]||(t[1]=(...e)=>l.loadMorePosts&&l.loadMorePosts(...e)),disabled:l.loading},[l.loading?((0,r.uX)(),(0,r.CE)("span",Je)):(0,r.Q3)("",!0),t[15]||(t[15]=(0,r.eW)(" Load More Posts "))],8,Ne)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",He,[(0,r.Lk)("div",ze,[(0,r.Lk)("div",Ye,[t[18]||(t[18]=(0,r.Lk)("h5",{class:"card-title"},"People to Follow",-1)),l.loadingUsers?((0,r.uX)(),(0,r.CE)("div",Ze,t[16]||(t[16]=[(0,r.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):0===l.suggestedUsers.length?((0,r.uX)(),(0,r.CE)("div",Ge,t[17]||(t[17]=[(0,r.Lk)("p",null,"No suggestions available",-1)]))):((0,r.uX)(),(0,r.CE)("div",et,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.suggestedUsers,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"d-flex align-items-center mb-3"},[(0,r.Lk)("div",tt,(0,c.v_)(l.getUserInitial(e.username)),1),(0,r.Lk)("div",st,[(0,r.bF)(i,{to:`/profile/${e.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,c.v_)(e.username),1)])),_:2},1032,["to"])]),(0,r.Lk)("button",{class:"btn btn-sm btn-primary follow-btn",onClick:t=>l.followUser(e.id),disabled:l.followingInProgress.includes(e.id)},[l.followingInProgress.includes(e.id)?((0,r.uX)(),(0,r.CE)("span",rt)):((0,r.uX)(),(0,r.CE)("span",lt,"Follow"))],8,at)])))),128))]))])])])])])}s(1701);const nt={class:"card mb-4"},it={class:"card-body"},ct={class:"d-flex mb-3"},dt={class:"bg-secondary text-white rounded-circle me-2 user-avatar"},ut={class:"mb-0"},mt={class:"text-muted"},pt={key:0,class:"dropdown ms-auto"},vt={class:"dropdown-menu dropdown-menu-end"},ft={class:"card-title"},kt={class:"card-text"},gt={key:0,class:"text-primary mb-0"},bt={class:"d-flex justify-content-between align-items-center mt-3 pt-3 border-top"},ht={class:"d-flex align-items-center"};function yt(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",nt,[(0,r.Lk)("div",it,[(0,r.Lk)("div",ct,[(0,r.Lk)("div",dt,(0,c.v_)(l.ownerInitial),1),(0,r.Lk)("div",null,[(0,r.bF)(i,{to:`/profile/${s.post.owner.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("h6",ut,(0,c.v_)(s.post.owner.username),1)])),_:1},8,["to"]),(0,r.Lk)("small",mt,(0,c.v_)(l.formattedDate),1)]),l.isOwner?((0,r.uX)(),(0,r.CE)("div",pt,[t[4]||(t[4]=(0,r.Lk)("button",{class:"btn btn-sm",type:"button","data-bs-toggle":"dropdown"},[(0,r.Lk)("i",{class:"fas fa-ellipsis-v"})],-1)),(0,r.Lk)("ul",vt,[(0,r.Lk)("li",null,[(0,r.bF)(i,{to:`/edit-post/${s.post.id}`,class:"dropdown-item"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>l.confirmDelete&&l.confirmDelete(...e)),["prevent"]))},t[3]||(t[3]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-2"},null,-1),(0,r.eW)(" Delete ")]))])])])):(0,r.Q3)("",!0)]),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"text-decoration-none text-dark"},{default:(0,r.k6)((()=>[(0,r.Lk)("h5",ft,(0,c.v_)(s.post.title),1),(0,r.Lk)("p",kt,(0,c.v_)(l.truncatedContent),1),l.isContentTruncated?((0,r.uX)(),(0,r.CE)("p",gt,"Read more...")):(0,r.Q3)("",!0)])),_:1},8,["to"]),(0,r.Lk)("div",bt,[(0,r.Lk)("div",ht,[(0,r.Lk)("button",{class:(0,c.C4)(["btn btn-sm",{"btn-primary":s.post.hasVoted,"btn-outline-primary":!s.post.hasVoted}]),onClick:t[1]||(t[1]=(...e)=>l.vote&&l.vote(...e))},[t[5]||(t[5]=(0,r.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(s.post.votes||0),1)],2),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"btn btn-sm btn-outline-secondary ms-2"},{default:(0,r.k6)((()=>[t[6]||(t[6]=(0,r.Lk)("i",{class:"fas fa-comment me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(l.commentsCount),1)])),_:1},8,["to"])]),(0,r.bF)(i,{to:`/posts/${s.post.id}`,class:"btn btn-sm btn-outline-primary"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" View Details ")]))),_:1},8,["to"])])])])}var Lt={name:"PostCard",props:{post:{type:Object,required:!0}},emits:["vote"],setup(e,{emit:t}){const s=(0,i.Pj)(),a=200,l=(0,_.KR)(0),o=(0,r.EW)((()=>s.getters["auth/currentUser"]||{})),n=(0,r.EW)((()=>o.value.id===e.post.owner_id)),c=(0,r.EW)((()=>e.post.owner?.username?.charAt(0).toUpperCase()||"")),d=(0,r.EW)((()=>e.post.content.length<=a?e.post.content:e.post.content.substring(0,a)+"...")),u=(0,r.EW)((()=>e.post.content.length>a)),m=(0,r.EW)((()=>{const t=new Date(e.post.created_at);return t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})),p=()=>{t("vote",e.post.id)},v=async()=>{if(confirm("Are you sure you want to delete this post?")){await s.dispatch("posts/deletePost",e.post.id)}},f=async()=>{try{const t=await s.dispatch("comments/fetchComments",e.post.id);l.value=t.length}catch(t){console.error("Failed to fetch comments:",t)}};return f(),{currentUser:o,isOwner:n,ownerInitial:c,truncatedContent:d,isContentTruncated:u,formattedDate:m,vote:p,confirmDelete:v,commentsCount:l}}};const wt=(0,R.A)(Lt,[["render",yt],["__scopeId","data-v-260b2a6d"]]);var _t=wt,Ct={name:"HomePage",components:{PostCard:_t},setup(){const e=(0,i.Pj)(),t=(0,_.KR)(10),s=(0,_.KR)(0),a=(0,_.KR)(""),l=(0,_.KR)([]),o=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),n=(0,r.EW)((()=>o.value.username?.charAt(0).toUpperCase()||"")),c=(0,r.EW)((()=>e.getters["posts/allPosts"])),d=(0,r.EW)((()=>e.state.posts.loading)),u=(0,r.EW)((()=>e.state.users.loading)),m=(0,r.EW)((()=>e.getters["users/allUsers"])),p=(0,r.EW)((()=>e.getters["users/following"]||[])),v=(0,r.EW)((()=>p.value.length)),f=(0,r.EW)((()=>e.getters["users/followers"]?.length||0)),k=(0,r.EW)((()=>{const e=p.value.map((e=>e.id));return m.value.filter((t=>t.id!==o.value.id&&!e.includes(t.id))).slice(0,5)})),g=async()=>{await e.dispatch("posts/fetchPosts",{limit:t.value,skip:s.value,search:a.value})},b=async()=>{s.value+=t.value,await g()},h=async()=>{s.value=0,await g()},y=async t=>{await e.dispatch("posts/votePost",t)},L=e=>e?.charAt(0).toUpperCase()||"",w=async t=>{l.value.push(t);try{await e.dispatch("users/followUser",t),e.dispatch("users/fetchUsers"),e.dispatch("users/fetchFollowing")}finally{l.value=l.value.filter((e=>e!==t))}};return(0,r.sV)((async()=>{await g(),await e.dispatch("users/fetchUsers"),await e.dispatch("users/fetchFollowing"),await e.dispatch("users/fetchFollowers")})),{currentUser:o,userInitial:n,posts:c,loading:d,loadingUsers:u,loadMorePosts:b,refreshPosts:h,handleVote:y,suggestedUsers:k,followingCount:v,followersCount:f,followUser:w,followingInProgress:l,getUserInitial:L}}};const Et=(0,R.A)(Ct,[["render",ot],["__scopeId","data-v-14556236"]]);var Rt=Et;const xt={class:"login-container"},Pt={class:"row justify-content-center"},Ft={class:"col-md-6 col-lg-5"},Wt={class:"card shadow"},Ut={class:"card-body p-5"},Dt={key:0,class:"alert alert-danger"},It={class:"mb-3"},At=["disabled"],Xt={class:"mb-3"},$t={class:"password-field"},St=["disabled"],Vt={class:"d-grid gap-2 mt-4"},Kt=["disabled"],qt={key:0,class:"spinner-border spinner-border-sm me-2"},jt={class:"text-center mt-4"},Bt={class:"register-link"};function Ot(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",xt,[(0,r.Lk)("div",Pt,[(0,r.Lk)("div",Ft,[(0,r.Lk)("div",Wt,[(0,r.Lk)("div",Ut,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"text-center mb-4 app-title"},"Login",-1)),l.error?((0,r.uX)(),(0,r.CE)("div",Dt,(0,c.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",It,[t[3]||(t[3]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),required:"",disabled:l.loading,placeholder:"Enter your username"},null,8,At),[[a.Jo,l.username]])]),(0,r.Lk)("div",Xt,[t[4]||(t[4]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.Lk)("div",$t,[(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),required:"",disabled:l.loading,placeholder:"Enter your password"},null,8,St),[[a.Jo,l.password]])])]),(0,r.Lk)("div",Vt,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg login-btn",disabled:l.loading},[l.loading?((0,r.uX)(),(0,r.CE)("span",qt)):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,c.v_)(l.loading?"Logging in...":"Login"),1)],8,Kt)])],32),(0,r.Lk)("div",jt,[(0,r.Lk)("p",Bt,[t[6]||(t[6]=(0,r.eW)(" Don't have an account? ")),(0,r.bF)(i,{to:"/register",class:"register-btn"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("Register")]))),_:1})])])])])])])])}var Qt={name:"LoginPage",setup(){const e=(0,i.Pj)(),t=(0,C.rd)(),s=(0,C.lq)(),a=(0,_.KR)(""),l=(0,_.KR)(""),o=(0,_.KR)(""),n=(0,r.EW)((()=>"loading"===e.state.auth.status)),c=async()=>{if(o.value="",a.value&&l.value)try{e.commit("auth/auth_request");const r=await e.dispatch("auth/login",{username:a.value,password:l.value});if(r){const e=s.query.redirect||"/";t.push(e)}else o.value="Login failed. Please check your credentials."}catch(r){if(r.response)switch(r.response.status){case 401:o.value="Invalid username or password";break;case 404:o.value="Server not found. Please check your connection.";break;case 500:o.value="Server error. Please try again later.";break;default:o.value=r.response.data?.detail||"An unexpected error occurred"}else r.request?o.value="No response from server. Please check your network connection.":o.value="Error setting up login request. Please try again.";console.error("Login error:",r),e.commit("auth/auth_error")}else o.value="Please enter both username and password"};return{username:a,password:l,error:o,loading:n,handleSubmit:c}}};const Tt=(0,R.A)(Qt,[["render",Ot],["__scopeId","data-v-86de2134"]]);var Mt=Tt;const Nt={class:"register-container"},Jt={class:"row justify-content-center"},Ht={class:"col-md-8 col-lg-6"},zt={class:"card shadow"},Yt={class:"card-body p-5"},Zt={key:0,class:"alert alert-danger"},Gt={class:"mb-3"},es=["disabled"],ts={class:"mb-3"},ss=["disabled"],as={class:"mb-3"},rs=["disabled"],ls={class:"mb-3"},os=["disabled"],ns={class:"mb-3"},is=["disabled"],cs={class:"d-grid gap-2"},ds=["disabled"],us={key:0,class:"spinner-border spinner-border-sm me-2"},ms={class:"text-center mt-4"};function ps(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Nt,[(0,r.Lk)("div",Jt,[(0,r.Lk)("div",Ht,[(0,r.Lk)("div",zt,[(0,r.Lk)("div",Yt,[t[15]||(t[15]=(0,r.Lk)("h2",{class:"text-center mb-4"},"Create an Account",-1)),l.error?((0,r.uX)(),(0,r.CE)("div",Zt,(0,c.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",Gt,[t[6]||(t[6]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.username=e),required:"",disabled:l.loading},null,8,es),[[a.Jo,l.formData.username]])]),(0,r.Lk)("div",ts,[t[7]||(t[7]=(0,r.Lk)("label",{for:"email",class:"form-label"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.email=e),required:"",disabled:l.loading},null,8,ss),[[a.Jo,l.formData.email]])]),(0,r.Lk)("div",as,[t[8]||(t[8]=(0,r.Lk)("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),(0,r.bo)((0,r.Lk)("input",{type:"tel",class:"form-control",id:"phone_number","onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.phone_number=e),required:"",disabled:l.loading},null,8,rs),[[a.Jo,l.formData.phone_number]])]),(0,r.Lk)("div",ls,[t[9]||(t[9]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.password=e),required:"",disabled:l.loading},null,8,os),[[a.Jo,l.formData.password]]),t[10]||(t[10]=(0,r.Lk)("div",{class:"form-text"}," Password must be at least 8 characters with uppercase, lowercase, numbers, and special characters. ",-1))]),(0,r.Lk)("div",ns,[t[11]||(t[11]=(0,r.Lk)("label",{for:"password_confirm",class:"form-label"},"Confirm Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password_confirm","onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.password_confirm=e),required:"",disabled:l.loading},null,8,is),[[a.Jo,l.formData.password_confirm]])]),(0,r.Lk)("div",cs,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:l.loading},[l.loading?((0,r.uX)(),(0,r.CE)("span",us)):(0,r.Q3)("",!0),t[12]||(t[12]=(0,r.eW)(" Register "))],8,ds)])],32),(0,r.Lk)("div",ms,[(0,r.Lk)("p",null,[t[14]||(t[14]=(0,r.eW)("Already have an account? ")),(0,r.bF)(i,{to:"/login"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Login")]))),_:1})])])])])])])])}var vs={name:"UserRegister",setup(){const e=(0,i.Pj)(),t=(0,C.rd)(),s=(0,_.Kh)({username:"",email:"",phone_number:"",password:"",password_confirm:""}),a=(0,_.KR)(""),l=(0,r.EW)((()=>"loading"===e.state.auth.status)),o=async()=>{if(a.value="",s.password!==s.password_confirm)return void(a.value="Passwords do not match");const r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;if(r.test(s.password))try{const a={...s,phone_number:parseInt(s.phone_number,10)},r=await e.dispatch("auth/register",a);r&&t.push("/")}catch(l){l.response&&l.response.data?a.value=l.response.data.detail||"Registration failed":a.value="Registration failed. Please try again."}else a.value="Password must be at least 8 characters with uppercase, lowercase, numbers, and special characters"};return{formData:s,error:a,loading:l,handleSubmit:o}}};const fs=(0,R.A)(vs,[["render",ps],["__scopeId","data-v-9b822f14"]]);var ks=fs,gs={name:"UserProfile",components:{PostCard:_t},setup(){const e=(0,i.Pj)(),t=(0,C.lq)(),s=(0,_.KR)(t.params.username),a=(0,_.KR)(!0),l=(0,_.KR)(!0),o=(0,_.KR)(!0),n=(0,_.KR)(!0),c=(0,_.KR)(!1),d=(0,_.KR)([]),u=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),m=(0,r.EW)((()=>e.getters["users/allUsers"])),p=(0,r.EW)((()=>e.getters["posts/allPosts"])),v=(0,r.EW)((()=>m.value.find((e=>e.username===s.value)))),f=(0,r.EW)((()=>v.value?.username?.charAt(0).toUpperCase()||"")),k=(0,r.EW)((()=>u.value.id===v.value?.id)),g=(0,r.EW)((()=>e.getters["users/followers"]||[])),b=(0,r.EW)((()=>e.getters["users/following"]||[])),h=(0,r.EW)((()=>g.value.length)),y=(0,r.EW)((()=>b.value.length)),L=(0,r.EW)((()=>!!v.value&&b.value.some((e=>e.id===v.value.id)))),w=(0,r.EW)((()=>{if(!v.value?.created_at)return"";const e=new Date(v.value.created_at);return e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})),E=async()=>{a.value=!0;try{if(0===m.value.length&&await e.dispatch("users/fetchUsers"),!v.value)try{await e.dispatch("users/fetchUserByUsername",s.value)}catch(t){console.error("User not found:",t)}}finally{a.value=!1}},R=async()=>{l.value=!0;try{await e.dispatch("posts/fetchPosts",{limit:100,skip:0,search:""}),v.value&&(d.value=p.value.filter((e=>e.owner_id===v.value.id)))}finally{l.value=!1}},x=async()=>{if(k.value){o.value=!0,n.value=!0;try{await e.dispatch("users/fetchFollowers"),await e.dispatch("users/fetchFollowing")}finally{o.value=!1,n.value=!1}}else await e.dispatch("users/fetchFollowing")},P=async()=>{if(v.value){c.value=!0;try{await e.dispatch("users/followUser",v.value.id)}finally{c.value=!1}}},F=async()=>{if(v.value){c.value=!0;try{await e.dispatch("users/unfollowUser",v.value.id)}finally{c.value=!1}}},W=async t=>{await e.dispatch("posts/votePost",t)},U=e=>e?.charAt(0).toUpperCase()||"";return(0,r.wB)((()=>t.params.username),(e=>{s.value=e,E(),R(),x()})),(0,r.sV)((async()=>{await E(),await R(),await x()})),{profile:v,loading:a,loadingPosts:l,loadingFollowers:o,loadingFollowing:n,userPosts:d,userInitial:f,isCurrentUser:k,followers:g,following:b,followersCount:h,followingCount:y,isFollowing:L,formattedJoinDate:w,followUser:P,unfollowUser:F,followActionInProgress:c,handleVote:W,getUserInitial:U}}};const bs=(0,R.A)(gs,[["__scopeId","data-v-730381ae"]]);var hs=bs;const ys={key:0,class:"text-center my-5"},Ls={key:1,class:"alert alert-warning"},ws={key:2,class:"post-detail"},_s={class:"card mb-4"},Cs={class:"card-body"},Es={class:"d-flex align-items-center mb-3"},Rs={class:"bg-secondary text-white rounded-circle me-3 user-avatar"},xs={class:"mb-0"},Ps={class:"text-muted"},Fs={key:0,class:"dropdown ms-auto"},Ws={class:"dropdown-menu dropdown-menu-end"},Us={class:"card-title"},Ds={class:"card-text"},Is={class:"d-flex justify-content-between align-items-center mt-4 pt-3 border-top"},As={class:"d-flex align-items-center"},Xs={class:"btn btn-outline-secondary ms-2",disabled:""},$s={key:0},Ss={class:"card"},Vs={class:"card-header bg-white"},Ks={class:"mb-0"},qs={class:"card-body"},js={class:"mb-4"},Bs={class:"d-flex"},Os={class:"bg-primary text-white rounded-circle me-2 comment-avatar"},Qs={class:"flex-grow-1"},Ts={class:"text-end"},Ms=["disabled"],Ns={key:0,class:"spinner-border spinner-border-sm me-1"},Js={key:0,class:"text-center my-4"},Hs={key:1,class:"text-center my-4"},zs={key:2},Ys={class:"d-flex"},Zs={class:"bg-secondary text-white rounded-circle me-2 comment-avatar"},Gs={class:"flex-grow-1"},ea={class:"comment-bubble p-3"},ta={class:"d-flex justify-content-between mb-1"},sa={class:"text-muted"},aa={class:"mb-0"};function ra(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return l.loading?((0,r.uX)(),(0,r.CE)("div",ys,t[5]||(t[5]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading post...",-1)]))):l.post?((0,r.uX)(),(0,r.CE)("div",ws,[(0,r.Lk)("div",_s,[(0,r.Lk)("div",Cs,[(0,r.Lk)("div",Es,[(0,r.Lk)("div",Rs,(0,c.v_)(l.ownerInitial),1),(0,r.Lk)("div",null,[(0,r.bF)(i,{to:`/profile/${l.post.owner.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("h5",xs,(0,c.v_)(l.post.owner.username),1)])),_:1},8,["to"]),(0,r.Lk)("small",Ps,(0,c.v_)(l.formattedDate),1)]),l.isOwner?((0,r.uX)(),(0,r.CE)("div",Fs,[t[8]||(t[8]=(0,r.Lk)("button",{class:"btn btn-sm",type:"button","data-bs-toggle":"dropdown"},[(0,r.Lk)("i",{class:"fas fa-ellipsis-v"})],-1)),(0,r.Lk)("ul",Ws,[(0,r.Lk)("li",null,[(0,r.bF)(i,{to:`/edit-post/${l.post.id}`,class:"dropdown-item"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>l.confirmDelete&&l.confirmDelete(...e)),["prevent"]))},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-2"},null,-1),(0,r.eW)(" Delete ")]))])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("h2",Us,(0,c.v_)(l.post.title),1),(0,r.Lk)("p",Ds,(0,c.v_)(l.post.content),1),(0,r.Lk)("div",Is,[(0,r.Lk)("div",As,[(0,r.Lk)("button",{class:(0,c.C4)(["btn",{"btn-primary":l.post.hasVoted,"btn-outline-primary":!l.post.hasVoted}]),onClick:t[1]||(t[1]=(...e)=>l.vote&&l.vote(...e))},[t[9]||(t[9]=(0,r.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(l.post.votes||0),1)],2),(0,r.Lk)("button",Xs,[t[10]||(t[10]=(0,r.Lk)("i",{class:"fas fa-comment me-1"},null,-1)),(0,r.eW)(" "+(0,c.v_)(l.comments.length),1)])]),l.isOwner?((0,r.uX)(),(0,r.CE)("div",$s,[(0,r.bF)(i,{to:`/edit-post/${l.post.id}`,class:"btn btn-primary"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.confirmDelete&&l.confirmDelete(...e)),class:"btn btn-danger ms-2"},t[12]||(t[12]=[(0,r.Lk)("i",{class:"fas fa-trash-alt me-1"},null,-1),(0,r.eW)(" Delete ")]))])):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",Ss,[(0,r.Lk)("div",Vs,[(0,r.Lk)("h5",Ks,"Comments ("+(0,c.v_)(l.comments.length)+")",1)]),(0,r.Lk)("div",qs,[(0,r.Lk)("div",js,[(0,r.Lk)("div",Bs,[(0,r.Lk)("div",Os,(0,c.v_)(l.currentUserInitial),1),(0,r.Lk)("div",Qs,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.newComment=e),class:"form-control mb-2",rows:"2",placeholder:"Write a comment..."},null,512),[[a.Jo,l.newComment]]),(0,r.Lk)("div",Ts,[(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.addComment&&l.addComment(...e)),class:"btn btn-primary",disabled:!l.newComment.trim()||l.commentLoading},[l.commentLoading?((0,r.uX)(),(0,r.CE)("span",Ns)):(0,r.Q3)("",!0),t[13]||(t[13]=(0,r.eW)(" Post Comment "))],8,Ms)])])])]),l.commentsLoading?((0,r.uX)(),(0,r.CE)("div",Js,t[14]||(t[14]=[(0,r.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading comments...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading comments...",-1)]))):0===l.comments.length?((0,r.uX)(),(0,r.CE)("div",Hs,t[15]||(t[15]=[(0,r.Lk)("p",{class:"text-muted"},"No comments yet. Be the first to comment!",-1)]))):((0,r.uX)(),(0,r.CE)("div",zs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.comments,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"comment mb-3"},[(0,r.Lk)("div",Ys,[(0,r.Lk)("div",Zs,(0,c.v_)(l.getInitial(e.user.username)),1),(0,r.Lk)("div",Gs,[(0,r.Lk)("div",ea,[(0,r.Lk)("div",ta,[(0,r.bF)(i,{to:`/profile/${e.user.username}`,class:"text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,c.v_)(e.user.username),1)])),_:2},1032,["to"]),(0,r.Lk)("small",sa,(0,c.v_)(l.formatDate(e.created_at)),1)]),(0,r.Lk)("p",aa,(0,c.v_)(e.content),1)])])])])))),128))]))])])])):((0,r.uX)(),(0,r.CE)("div",Ls," Post not found or has been deleted. "))}var la={name:"PostDetail",setup(){const e=(0,i.Pj)(),t=(0,C.lq)(),s=(0,C.rd)(),a=parseInt(t.params.id),l=(0,_.KR)(!0),o=(0,_.KR)(!0),n=(0,_.KR)(!1),c=(0,_.KR)(""),d=(0,r.EW)((()=>e.getters["auth/currentUser"]||{})),u=(0,r.EW)((()=>d.value.username?.charAt(0).toUpperCase()||"")),m=(0,r.EW)((()=>e.getters["posts/getCurrentPost"])),p=(0,r.EW)((()=>e.getters["comments/getCommentsByPostId"](a)||[])),v=(0,r.EW)((()=>d.value.id===m.value?.owner_id)),f=(0,r.EW)((()=>m.value?.owner?.username?.charAt(0).toUpperCase()||"")),k=(0,r.EW)((()=>{if(!m.value?.created_at)return"";const e=new Date(m.value.created_at);return e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})),g=e=>e?.charAt(0).toUpperCase()||"",b=e=>{const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},h=async()=>{l.value=!0;try{await e.dispatch("posts/fetchPostById",a)}finally{l.value=!1}},y=async()=>{o.value=!0;try{await e.dispatch("comments/fetchComments",a)}finally{o.value=!1}},L=async()=>{await e.dispatch("posts/votePost",a)},w=async()=>{if(c.value.trim()){n.value=!0;try{await e.dispatch("comments/createComment",{postId:a,content:c.value}),c.value=""}finally{n.value=!1}}},E=async()=>{if(confirm("Are you sure you want to delete this post?")){const t=await e.dispatch("posts/deletePost",a);t&&s.push("/")}};return(0,r.sV)((async()=>{await h(),await y()})),{post:m,loading:l,commentsLoading:o,commentLoading:n,comments:p,newComment:c,currentUser:d,currentUserInitial:u,isOwner:v,ownerInitial:f,formattedDate:k,getInitial:g,formatDate:b,vote:L,addComment:w,confirmDelete:E}}};const oa=(0,R.A)(la,[["render",ra],["__scopeId","data-v-4f67123e"]]);var na=oa;const ia={class:"row justify-content-center"},ca={class:"col-lg-8"},da={class:"card shadow"},ua={class:"card-body"},ma={key:0,class:"alert alert-danger"},pa={class:"mb-3"},va=["disabled"],fa={class:"mb-3"},ka=["disabled"],ga={class:"mb-3 form-check"},ba=["disabled"],ha={class:"d-flex justify-content-between"},ya=["disabled"],La={key:0,class:"spinner-border spinner-border-sm me-2"};function wa(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ia,[(0,r.Lk)("div",ca,[(0,r.Lk)("div",da,[t[9]||(t[9]=(0,r.Lk)("div",{class:"card-header bg-white"},[(0,r.Lk)("h5",{class:"mb-0"},"Create New Post")],-1)),(0,r.Lk)("div",ua,[l.error?((0,r.uX)(),(0,r.CE)("div",ma,(0,c.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",pa,[t[4]||(t[4]=(0,r.Lk)("label",{for:"title",class:"form-label"},"Title",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.title=e),required:"",disabled:l.loading,placeholder:"Enter a title for your post"},null,8,va),[[a.Jo,l.formData.title]])]),(0,r.Lk)("div",fa,[t[5]||(t[5]=(0,r.Lk)("label",{for:"content",class:"form-label"},"Content",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.content=e),rows:"8",required:"",disabled:l.loading,placeholder:"Write your post content here..."},null,8,ka),[[a.Jo,l.formData.content]])]),(0,r.Lk)("div",ga,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",class:"form-check-input",id:"published","onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.published=e),disabled:l.loading},null,8,ba),[[a.lH,l.formData.published]]),t[6]||(t[6]=(0,r.Lk)("label",{class:"form-check-label",for:"published"},"Publish this post",-1))]),(0,r.Lk)("div",ha,[(0,r.bF)(i,{to:"/",class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)(" Cancel ")]))),_:1}),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.loading||!l.isFormValid},[l.loading?((0,r.uX)(),(0,r.CE)("span",La)):(0,r.Q3)("",!0),t[8]||(t[8]=(0,r.eW)(" Create Post "))],8,ya)])],32)])])])])}var _a={name:"CreatePost",setup(){const e=(0,i.Pj)(),t=(0,C.rd)(),s=(0,_.Kh)({title:"",content:"",published:!0}),a=(0,_.KR)(""),l=(0,_.KR)(!1),o=(0,r.EW)((()=>s.title.trim()&&s.content.trim())),n=async()=>{if(o.value){l.value=!0,a.value="";try{const r=await e.dispatch("posts/createPost",s);r?t.push(`/posts/${r.id}`):a.value="Failed to create post. Please try again."}catch(r){a.value=r.response?.data?.detail||"Failed to create post"}finally{l.value=!1}}};return{formData:s,error:a,loading:l,isFormValid:o,handleSubmit:n}}};const Ca=(0,R.A)(_a,[["render",wa]]);var Ea=Ca;const Ra={class:"row justify-content-center"},xa={class:"col-lg-8"},Pa={key:0,class:"text-center my-5"},Fa={key:1,class:"alert alert-warning"},Wa={key:2,class:"card shadow"},Ua={class:"card-body"},Da={key:0,class:"alert alert-danger"},Ia={class:"mb-3"},Aa=["disabled"],Xa={class:"mb-3"},$a=["disabled"],Sa={class:"mb-3 form-check"},Va=["disabled"],Ka={class:"d-flex justify-content-between"},qa=["disabled"],ja={key:0,class:"spinner-border spinner-border-sm me-2"};function Ba(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ra,[(0,r.Lk)("div",xa,[l.loading?((0,r.uX)(),(0,r.CE)("div",Pa,t[4]||(t[4]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,r.Lk)("p",{class:"mt-2"},"Loading post...",-1)]))):l.post?((0,r.uX)(),(0,r.CE)("div",Wa,[t[10]||(t[10]=(0,r.Lk)("div",{class:"card-header bg-white"},[(0,r.Lk)("h5",{class:"mb-0"},"Edit Post")],-1)),(0,r.Lk)("div",Ua,[l.error?((0,r.uX)(),(0,r.CE)("div",Da,(0,c.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",Ia,[t[5]||(t[5]=(0,r.Lk)("label",{for:"title",class:"form-label"},"Title",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.title=e),required:"",disabled:l.saving},null,8,Aa),[[a.Jo,l.formData.title]])]),(0,r.Lk)("div",Xa,[t[6]||(t[6]=(0,r.Lk)("label",{for:"content",class:"form-label"},"Content",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.content=e),rows:"8",required:"",disabled:l.saving},null,8,$a),[[a.Jo,l.formData.content]])]),(0,r.Lk)("div",Sa,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",class:"form-check-input",id:"published","onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.published=e),disabled:l.saving},null,8,Va),[[a.lH,l.formData.published]]),t[7]||(t[7]=(0,r.Lk)("label",{class:"form-check-label",for:"published"},"Published",-1))]),(0,r.Lk)("div",Ka,[(0,r.bF)(i,{to:`/posts/${l.postId}`,class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)(" Cancel ")]))),_:1},8,["to"]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.saving||!l.isFormValid},[l.saving?((0,r.uX)(),(0,r.CE)("span",ja)):(0,r.Q3)("",!0),t[9]||(t[9]=(0,r.eW)(" Save Changes "))],8,qa)])],32)])])):((0,r.uX)(),(0,r.CE)("div",Fa," Post not found or has been deleted. "))])])}var Oa={name:"EditPost",setup(){const e=(0,i.Pj)(),t=(0,C.lq)(),s=(0,C.rd)(),a=parseInt(t.params.id),l=(0,_.KR)(!0),o=(0,_.KR)(!1),n=(0,_.KR)(""),c=(0,_.Kh)({title:"",content:"",published:!0}),d=(0,r.EW)((()=>e.getters["posts/getCurrentPost"])),u=(0,r.EW)((()=>c.title.trim()&&c.content.trim()));(0,r.wB)(d,(e=>{e&&(c.title=e.title,c.content=e.content,c.published=e.published)}));const m=async()=>{l.value=!0;try{await e.dispatch("posts/fetchPostById",a);const t=e.getters["auth/currentUser"];d.value&&d.value.owner_id!==t.id&&s.push(`/posts/${a}`)}finally{l.value=!1}},p=async()=>{if(u.value){o.value=!0,n.value="";try{const t=await e.dispatch("posts/updatePost",{id:a,postData:{title:c.title,content:c.content,published:c.published}});t?s.push(`/posts/${a}`):n.value="Failed to update post. Please try again."}catch(t){n.value=t.response?.data?.detail||"Failed to update post"}finally{o.value=!1}}};return(0,r.sV)(m),{post:d,postId:a,formData:c,loading:l,saving:o,error:n,isFormValid:u,handleSubmit:p}}};const Qa=(0,R.A)(Oa,[["render",Ba]]);var Ta=Qa;const Ma={class:"not-found text-center py-5"},Na={class:"container"};function Ja(e,t,s,a,l,o){const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ma,[(0,r.Lk)("div",Na,[t[1]||(t[1]=(0,r.Lk)("i",{class:"fas fa-search fa-4x text-muted mb-4"},null,-1)),t[2]||(t[2]=(0,r.Lk)("h1",{class:"display-4"},"Page Not Found",-1)),t[3]||(t[3]=(0,r.Lk)("p",{class:"lead"},"The page you're looking for doesn't exist or has been moved.",-1)),(0,r.bF)(n,{to:"/",class:"btn btn-primary btn-lg mt-3"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-home me-2"},null,-1),(0,r.eW)(" Go Home ")]))),_:1})])])}var Ha={name:"NotFound"};const za=(0,R.A)(Ha,[["render",Ja]]);var Ya=za;const Za={class:"reels-page"},Ga={class:"container"},er={class:"d-flex justify-content-between align-items-center mb-4"};function tr(e,t,s,a,l,o){const n=(0,r.g2)("router-link"),i=(0,r.g2)("ReelsFeed");return(0,r.uX)(),(0,r.CE)("div",Za,[(0,r.Lk)("div",Ga,[(0,r.Lk)("div",er,[t[1]||(t[1]=(0,r.Lk)("h1",null,"Reels",-1)),(0,r.bF)(n,{to:"/create-reel",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-plus me-2"},null,-1),(0,r.eW)(" Create Reel ")]))),_:1})]),(0,r.bF)(i)])])}const sr={class:"reels-container"},ar={key:0,class:"text-center my-4"},rr={key:1,class:"text-center my-4"},lr={class:"alert alert-info"},or={class:"mt-2"},nr={key:2,class:"row g-4"},ir={class:"card reel-card h-100"},cr=["onClick"],dr=["src"],ur={class:"card-body"},mr={class:"card-title"},pr={class:"card-text small text-muted"},vr={class:"card-text"},fr={class:"card-footer bg-transparent"},kr={class:"d-flex justify-content-between align-items-center"},gr={class:"me-3"},br={key:0},hr=["onClick"],yr={key:3,class:"text-center mt-4"},Lr=["disabled"],wr={class:"modal fade",id:"deleteReelModal",tabindex:"-1","aria-hidden":"true",ref:"deleteModal"},_r={class:"modal-dialog"},Cr={class:"modal-content"},Er={class:"modal-footer"};function Rr(e,t,s,a,l,o){const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",sr,[a.loading?((0,r.uX)(),(0,r.CE)("div",ar,t[2]||(t[2]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin fa-2x"},null,-1),(0,r.Lk)("p",null,"Loading reels...",-1)]))):0===a.reels.length?((0,r.uX)(),(0,r.CE)("div",rr,[(0,r.Lk)("div",lr,[t[4]||(t[4]=(0,r.Lk)("i",{class:"fas fa-film me-2"},null,-1)),t[5]||(t[5]=(0,r.eW)(" No reels found. ")),(0,r.Lk)("div",or,[(0,r.bF)(n,{to:"/create-reel",class:"btn btn-primary btn-sm"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("i",{class:"fas fa-plus me-2"},null,-1),(0,r.eW)(" Create your first reel ")]))),_:1})])])])):((0,r.uX)(),(0,r.CE)("div",nr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.reels,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"col-md-6 col-lg-4"},[(0,r.Lk)("div",ir,[(0,r.Lk)("div",{class:"reel-preview",onClick:t=>a.viewReel(e.id)},[(0,r.Lk)("video",{class:"card-img-top",src:e.video_url,preload:"metadata"},null,8,dr),t[6]||(t[6]=(0,r.Lk)("div",{class:"overlay"},[(0,r.Lk)("i",{class:"fas fa-play-circle fa-3x"})],-1))],8,cr),(0,r.Lk)("div",ur,[(0,r.Lk)("h5",mr,(0,c.v_)(e.title),1),(0,r.Lk)("p",pr,[t[7]||(t[7]=(0,r.eW)(" By ")),(0,r.bF)(n,{to:`/profile/${e.owner.username}`},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(e.owner.username),1)])),_:2},1032,["to"]),(0,r.eW)(" Â· "+(0,c.v_)(a.formatDate(e.created_at)),1)]),(0,r.Lk)("p",vr,(0,c.v_)(a.truncateText(e.description,80)),1)]),(0,r.Lk)("div",fr,[(0,r.Lk)("div",kr,[(0,r.Lk)("div",null,[(0,r.Lk)("span",gr,[(0,r.Lk)("i",{class:(0,c.C4)(["fas fa-heart",{"text-danger":e.is_liked}])},null,2),(0,r.eW)(" "+(0,c.v_)(e.likes||0),1)]),(0,r.Lk)("span",null,[t[8]||(t[8]=(0,r.Lk)("i",{class:"fas fa-comment"},null,-1)),(0,r.eW)(" "+(0,c.v_)(e.comments_count||0),1)])]),a.currentUser&&a.currentUser.id===e.owner_id?((0,r.uX)(),(0,r.CE)("div",br,[(0,r.bF)(n,{to:`/edit-reel/${e.id}`,class:"btn btn-sm btn-outline-secondary me-2"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)]))),_:2},1032,["to"]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>a.deleteReelConfirm(e)},t[10]||(t[10]=[(0,r.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,hr)])):(0,r.Q3)("",!0)])])])])))),128))])),a.reels.length>0&&!a.reachedEnd?((0,r.uX)(),(0,r.CE)("div",yr,[(0,r.Lk)("button",{class:"btn btn-outline-primary",onClick:t[0]||(t[0]=(...e)=>a.loadMore&&a.loadMore(...e)),disabled:a.loading},[(0,r.Lk)("i",{class:(0,c.C4)(["fas fa-sync me-2",{"fa-spin":a.loading}])},null,2),t[11]||(t[11]=(0,r.eW)(" Load more reels "))],8,Lr)])):(0,r.Q3)("",!0),(0,r.Lk)("div",wr,[(0,r.Lk)("div",_r,[(0,r.Lk)("div",Cr,[t[13]||(t[13]=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h5",{class:"modal-title"},"Delete Reel"),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t[14]||(t[14]=(0,r.Lk)("div",{class:"modal-body"}," Are you sure you want to delete this reel? This action cannot be undone. ",-1)),(0,r.Lk)("div",Er,[t[12]||(t[12]=(0,r.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>a.confirmDelete&&a.confirmDelete(...e))},"Delete")])])])],512)])}var xr=s(8077),Pr={name:"ReelsFeed",props:{userId:{type:Number,default:null}},setup(e){const t=(0,i.Pj)(),s=(0,C.rd)(),a=(0,_.KR)(!1),l=(0,_.KR)(0),o=(0,_.KR)(9),n=(0,_.KR)(!1),c=(0,_.KR)(null),d=(0,_.KR)(null),u=(0,r.EW)((()=>t.getters["reels/allReels"])),m=(0,r.EW)((()=>t.getters["auth/currentUser"])),p=async(s=!1)=>{if(!a.value){a.value=!0,s||(l.value=0,n.value=!1);try{const a=await t.dispatch("reels/fetchReels",{limit:o.value,skip:l.value,userId:e.userId});a.length<o.value&&(n.value=!0),s&&(l.value+=o.value)}finally{a.value=!1}}},v=()=>{p(!0)},f=e=>{s.push(`/reels/${e}`)},k=e=>{d.value=e,c.value||(c.value=new xr.aF(document.getElementById("deleteReelModal"))),c.value.show()},g=async()=>{if(!d.value)return;const e=await t.dispatch("reels/deleteReel",d.value.id);e&&c.value.hide()},b=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)},h=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"";return(0,r.sV)((()=>{p()})),{reels:u,loading:a,reachedEnd:n,currentUser:m,deleteModal:c,reelToDelete:d,loadMore:v,viewReel:f,deleteReelConfirm:k,confirmDelete:g,formatDate:b,truncateText:h}}};const Fr=(0,R.A)(Pr,[["render",Rr],["__scopeId","data-v-d5e27144"]]);var Wr=Fr,Ur={name:"ReelsView",components:{ReelsFeed:Wr}};const Dr=(0,R.A)(Ur,[["render",tr],["__scopeId","data-v-57dcbd48"]]);var Ir=Dr;const Ar={class:"reel-detail-view"},Xr={class:"container"},$r={class:"mb-4"};function Sr(e,t,s,a,l,o){const n=(0,r.g2)("router-link"),i=(0,r.g2)("ReelDetail");return(0,r.uX)(),(0,r.CE)("div",Ar,[(0,r.Lk)("div",Xr,[(0,r.Lk)("div",$r,[(0,r.bF)(n,{to:"/reels",class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,r.eW)(" Back to Reels ")]))),_:1})]),(0,r.bF)(i)])])}const Vr={class:"reel-detail-container"},Kr={key:0,class:"text-center my-5"},qr={key:1,class:"alert alert-danger"},jr={key:2,class:"reel-content"},Br={class:"row"},Or={class:"col-md-8"},Qr={class:"video-player-container"},Tr={controls:"",autoplay:"",class:"video-player",ref:"videoPlayer"},Mr=["src"],Nr={class:"reel-info mt-3"},Jr={class:"d-flex align-items-center my-3"},Hr={class:"avatar"},zr={class:"ms-2 fw-bold"},Yr={class:"text-muted"},Zr={key:0,class:"ms-auto"},Gr={class:"dropdown"},el={class:"dropdown-menu","aria-labelledby":"reelActionsDropdown"},tl={class:"reel-actions d-flex align-items-center my-3"},sl={class:"ms-1"},al={class:"ms-1"},rl={class:"reel-description"},ll={class:"col-md-4"},ol={class:"comments-container"},nl={key:0,class:"text-center my-3"},il={key:1,class:"text-center my-3"},cl={key:2,class:"comments-list"},dl={class:"d-flex"},ul={class:"comment-avatar"},ml={class:"comment-content ms-2"},pl={class:"comment-header"},vl={class:"text-muted ms-2"},fl={class:"comment-text"},kl={class:"comment-form mt-3"},gl={class:"input-group"},bl=["disabled"],hl=["disabled"],yl={key:0,class:"form-text text-center mt-2"},Ll={class:"modal fade",id:"deleteReelModal",tabindex:"-1","aria-hidden":"true",ref:"deleteModal"},wl={class:"modal-dialog"},_l={class:"modal-content"},Cl={class:"modal-footer"};function El(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Vr,[l.loading?((0,r.uX)(),(0,r.CE)("div",Kr,t[6]||(t[6]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin fa-3x"},null,-1),(0,r.Lk)("p",{class:"mt-3"},"Loading reel...",-1)]))):l.reel?((0,r.uX)(),(0,r.CE)("div",jr,[(0,r.Lk)("div",Br,[(0,r.Lk)("div",Or,[(0,r.Lk)("div",Qr,[(0,r.Lk)("video",Tr,[(0,r.Lk)("source",{src:l.reel.video_url,type:"video/mp4"},null,8,Mr),t[7]||(t[7]=(0,r.eW)(" Your browser does not support the video tag. "))],512)]),(0,r.Lk)("div",Nr,[(0,r.Lk)("h2",null,(0,c.v_)(l.reel.title),1),(0,r.Lk)("div",Jr,[(0,r.bF)(i,{to:`/profile/${l.reel.owner.username}`,class:"d-flex align-items-center text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",Hr,(0,c.v_)(l.reel.owner.username.charAt(0).toUpperCase()),1),(0,r.Lk)("span",zr,(0,c.v_)(l.reel.owner.username),1)])),_:1},8,["to"]),t[11]||(t[11]=(0,r.Lk)("span",{class:"mx-3"},"â¢",-1)),(0,r.Lk)("span",Yr,(0,c.v_)(l.formatDate(l.reel.created_at)),1),l.isOwner?((0,r.uX)(),(0,r.CE)("div",Zr,[(0,r.Lk)("div",Gr,[t[10]||(t[10]=(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",type:"button",id:"reelActionsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r.Lk)("i",{class:"fas fa-ellipsis-h"})],-1)),(0,r.Lk)("ul",el,[(0,r.Lk)("li",null,[(0,r.bF)(i,{to:`/edit-reel/${l.reel.id}`,class:"dropdown-item"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,r.eW)(" Edit ")]))),_:1},8,["to"])]),(0,r.Lk)("li",null,[(0,r.Lk)("button",{class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(...e)=>l.confirmDelete&&l.confirmDelete(...e))},t[9]||(t[9]=[(0,r.Lk)("i",{class:"fas fa-trash me-2"},null,-1),(0,r.eW)(" Delete ")]))])])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",tl,[(0,r.Lk)("button",{class:(0,c.C4)(["btn btn-like me-3",{liked:l.reel.is_liked}]),onClick:t[1]||(t[1]=(...e)=>l.handleLike&&l.handleLike(...e))},[t[12]||(t[12]=(0,r.Lk)("i",{class:"fas fa-heart"},null,-1)),(0,r.Lk)("span",sl,(0,c.v_)(l.reel.likes||0),1)],2),(0,r.Lk)("button",{class:"btn btn-comment",onClick:t[2]||(t[2]=(...e)=>l.focusCommentInput&&l.focusCommentInput(...e))},[t[13]||(t[13]=(0,r.Lk)("i",{class:"fas fa-comment"},null,-1)),(0,r.Lk)("span",al,(0,c.v_)(l.comments.length||0),1)])]),(0,r.Lk)("div",rl,[(0,r.Lk)("p",null,(0,c.v_)(l.reel.description),1)])])]),(0,r.Lk)("div",ll,[(0,r.Lk)("div",ol,[t[19]||(t[19]=(0,r.Lk)("h4",{class:"mb-3"},"Comments",-1)),l.commentsLoading?((0,r.uX)(),(0,r.CE)("div",nl,t[14]||(t[14]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,r.Lk)("p",null,"Loading comments...",-1)]))):0===l.comments.length?((0,r.uX)(),(0,r.CE)("div",il,t[15]||(t[15]=[(0,r.Lk)("p",{class:"text-muted"},"No comments yet.",-1),(0,r.Lk)("p",null,"Be the first to comment!",-1)]))):((0,r.uX)(),(0,r.CE)("div",cl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.comments,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"comment-item"},[(0,r.Lk)("div",dl,[(0,r.Lk)("div",ul,(0,c.v_)(e.user.username.charAt(0).toUpperCase()),1),(0,r.Lk)("div",ml,[(0,r.Lk)("div",pl,[(0,r.bF)(i,{to:`/profile/${e.user.username}`,class:"fw-bold text-decoration-none"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(e.user.username),1)])),_:2},1032,["to"]),(0,r.Lk)("small",vl,(0,c.v_)(l.formatDate(e.created_at)),1)]),(0,r.Lk)("div",fl,(0,c.v_)(e.content),1)])])])))),128))])),(0,r.Lk)("div",kl,[(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.submitComment&&l.submitComment(...e)),["prevent"]))},[(0,r.Lk)("div",gl,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"Add a comment...","onUpdate:modelValue":t[3]||(t[3]=e=>l.commentText=e),ref:"commentInput",disabled:!l.isAuthenticated},null,8,bl),[[a.Jo,l.commentText]]),(0,r.Lk)("button",{class:"btn btn-primary",type:"submit",disabled:!l.commentText.trim()||!l.isAuthenticated},t[16]||(t[16]=[(0,r.Lk)("i",{class:"fas fa-paper-plane"},null,-1)]),8,hl)]),l.isAuthenticated?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",yl,[(0,r.bF)(i,{to:"/login"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Log in")]))),_:1}),t[18]||(t[18]=(0,r.eW)(" to leave a comment. "))]))],32)])])])])])):((0,r.uX)(),(0,r.CE)("div",qr," Reel not found or has been deleted. ")),(0,r.Lk)("div",Ll,[(0,r.Lk)("div",wl,[(0,r.Lk)("div",_l,[t[21]||(t[21]=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h5",{class:"modal-title"},"Delete Reel"),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t[22]||(t[22]=(0,r.Lk)("div",{class:"modal-body"}," Are you sure you want to delete this reel? This action cannot be undone. ",-1)),(0,r.Lk)("div",Cl,[t[20]||(t[20]=(0,r.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[5]||(t[5]=(...e)=>l.deleteReel&&l.deleteReel(...e))},"Delete")])])])],512)])}var Rl={name:"ReelDetail",setup(){const e=(0,i.Pj)(),t=(0,C.lq)(),s=(0,C.rd)(),a=(0,_.KR)(null),l=(0,_.KR)(null),o=(0,_.KR)(null),n=(0,_.KR)(!0),c=(0,_.KR)(!1),d=(0,_.KR)(""),u=(0,r.EW)((()=>e.getters["reels/getCurrentReel"])),m=(0,r.EW)((()=>e.getters["reels/getReelComments"](Number(t.params.id)))),p=(0,r.EW)((()=>e.getters["auth/currentUser"])),v=(0,r.EW)((()=>e.getters["auth/isAuthenticated"])),f=(0,r.EW)((()=>!(!u.value||!p.value)&&u.value.owner_id===p.value.id)),k=(0,r.EW)((()=>Number(t.params.id))),g=async()=>{n.value=!0;try{await e.dispatch("reels/fetchReelById",k.value),await b()}catch(t){console.error("Failed to load reel:",t)}finally{n.value=!1}},b=async()=>{c.value=!0;try{await e.dispatch("reels/fetchReelComments",k.value)}catch(t){console.error("Failed to load comments:",t)}finally{c.value=!1}},h=async()=>{v.value?await e.dispatch("reels/likeReel",k.value):s.push("/login")},y=async()=>{if(d.value.trim()&&v.value)try{await e.dispatch("reels/commentOnReel",{reelId:k.value,content:d.value.trim()}),d.value=""}catch(t){console.error("Failed to post comment:",t)}},L=()=>{l.value&&l.value.focus()},w=()=>{o.value||(o.value=new xr.aF(document.getElementById("deleteReelModal"))),o.value.show()},E=async()=>{try{const t=await e.dispatch("reels/deleteReel",k.value);t&&(o.value&&o.value.hide(),s.push("/reels"))}catch(t){console.error("Failed to delete reel:",t)}},R=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)};return(0,r.sV)((()=>{g()})),(0,r.hi)((()=>{a.value&&a.value.pause()})),{reel:u,loading:n,commentsLoading:c,comments:m,commentText:d,videoPlayer:a,commentInput:l,isAuthenticated:v,isOwner:f,loadReelData:g,handleLike:h,submitComment:y,focusCommentInput:L,confirmDelete:w,deleteReel:E,formatDate:R}}};const xl=(0,R.A)(Rl,[["render",El],["__scopeId","data-v-70220f08"]]);var Pl=xl,Fl={name:"ReelDetailView",components:{ReelDetail:Pl}};const Wl=(0,R.A)(Fl,[["render",Sr],["__scopeId","data-v-6906c41a"]]);var Ul=Wl;const Dl={class:"create-reel-view"},Il={class:"container"},Al={class:"mb-4"};function Xl(e,t,s,a,l,o){const n=(0,r.g2)("router-link"),i=(0,r.g2)("CreateReel");return(0,r.uX)(),(0,r.CE)("div",Dl,[(0,r.Lk)("div",Il,[(0,r.Lk)("div",Al,[(0,r.bF)(n,{to:"/reels",class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,r.eW)(" Back to Reels ")]))),_:1})]),(0,r.bF)(i)])])}const $l={class:"create-reel-container"},Sl={class:"card shadow-sm"},Vl={class:"card-header bg-primary text-white"},Kl={class:"m-0"},ql={class:"card-body"},jl={class:"mb-3"},Bl={class:"mb-3"},Ol={class:"mb-3"},Ql={class:"input-group"},Tl=["required"],Ml={key:0,class:"video-preview-container mb-3"},Nl={class:"video-preview"},Jl={ref:"videoPreviewElement",controls:"",class:"preview-video"},Hl=["src"],zl={key:1,class:"alert alert-danger"},Yl={class:"d-flex justify-content-between mt-4"},Zl=["disabled"],Gl={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"};function eo(e,t,s,l,o,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",$l,[(0,r.Lk)("div",Sl,[(0,r.Lk)("div",Vl,[(0,r.Lk)("h4",Kl,(0,c.v_)(l.isEditing?"Edit Reel":"Create New Reel"),1)]),(0,r.Lk)("div",ql,[(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",jl,[t[5]||(t[5]=(0,r.Lk)("label",{for:"title",class:"form-label"},"Title",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.title=e),required:"",placeholder:"Enter a title for your reel"},null,512),[[a.Jo,l.form.title]])]),(0,r.Lk)("div",Bl,[t[6]||(t[6]=(0,r.Lk)("label",{for:"description",class:"form-label"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.description=e),rows:"3",placeholder:"Add a description to your reel"},null,512),[[a.Jo,l.form.description]])]),(0,r.Lk)("div",Ol,[t[7]||(t[7]=(0,r.Lk)("label",{for:"videoFile",class:"form-label"},"Video File",-1)),(0,r.Lk)("div",Ql,[(0,r.Lk)("input",{type:"file",class:"form-control",id:"videoFile",onChange:t[2]||(t[2]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),required:!l.isEditing,accept:"video/*"},null,40,Tl),l.form.videoFile?((0,r.uX)(),(0,r.CE)("button",{key:0,type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=(...e)=>l.clearSelectedFile&&l.clearSelectedFile(...e))}," Clear ")):(0,r.Q3)("",!0)]),t[8]||(t[8]=(0,r.Lk)("div",{class:"form-text"}," Supported formats: MP4, WebM, MOV. Max size: 50MB. ",-1))]),l.videoPreview?((0,r.uX)(),(0,r.CE)("div",Ml,[t[10]||(t[10]=(0,r.Lk)("h5",null,"Preview",-1)),(0,r.Lk)("div",Nl,[(0,r.Lk)("video",Jl,[(0,r.Lk)("source",{src:l.videoPreview,type:"video/mp4"},null,8,Hl),t[9]||(t[9]=(0,r.eW)(" Your browser does not support the video tag. "))],512)])])):(0,r.Q3)("",!0),l.error?((0,r.uX)(),(0,r.CE)("div",zl,(0,c.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",Yl,[(0,r.bF)(i,{to:"/reels",class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)(" Cancel ")]))),_:1}),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.loading},[l.loading?((0,r.uX)(),(0,r.CE)("span",Gl)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,c.v_)(l.isEditing?"Update Reel":"Upload Reel"),1)],8,Zl)])],32)])])])}var to={name:"CreateReel",setup(){const e=(0,i.Pj)(),t=(0,C.rd)(),s=(0,C.lq)(),a=(0,_.KR)({title:"",description:"",videoFile:null}),l=(0,_.KR)(null),o=(0,_.KR)(null),n=(0,_.KR)(!1),c=(0,_.KR)(null),d=(0,r.EW)((()=>s.params.id?parseInt(s.params.id):null)),u=(0,r.EW)((()=>!!d.value)),m=async()=>{if(u.value){n.value=!0;try{const s=await e.dispatch("reels/fetchReelById",d.value);s?(a.value.title=s.title,a.value.description=s.description,s.video_url&&(l.value=s.video_url)):(c.value="Reel not found",t.push("/reels"))}catch(s){c.value="Failed to load reel data"}finally{n.value=!1}}},p=e=>{const t=e.target.files[0];if(!t)return void v();const s=52428800;if(t.size>s)return c.value="File size exceeds 50MB limit. Please choose a smaller file.",void(e.target.value="");const r=["video/mp4","video/webm","video/quicktime"];if(!r.includes(t.type))return c.value="Invalid file type. Please select MP4, WebM, or MOV video file.",void(e.target.value="");c.value=null,a.value.videoFile=t;const o=new FileReader;o.onload=e=>{l.value=e.target.result},o.readAsDataURL(t)},v=()=>{a.value.videoFile=null,l.value=null,o.value&&(o.value.src=""),u.value&&m()},f=async()=>{if(a.value.title)if(u.value||a.value.videoFile){c.value=null,n.value=!0;try{if(u.value)await e.dispatch("reels/updateReel",{id:d.value,reelData:a.value}),t.push(`/reels/${d.value}`);else{const s=await e.dispatch("reels/createReel",a.value);s&&t.push(`/reels/${s.id}`)}}catch(s){c.value=s.message||"An error occurred while saving the reel"}finally{n.value=!1}}else c.value="Video file is required";else c.value="Title is required"};return(0,r.sV)((()=>{u.value&&m()})),e.commit("reels/set_current_reel",null),{form:a,videoPreview:l,videoPreviewElement:o,loading:n,error:c,isEditing:u,handleFileChange:p,clearSelectedFile:v,submitForm:f}}};const so=(0,R.A)(to,[["render",eo],["__scopeId","data-v-e33d1ca2"]]);var ao=so,ro={name:"CreateReelView",components:{CreateReel:ao}};const lo=(0,R.A)(ro,[["render",Xl],["__scopeId","data-v-4b01248a"]]);var oo=lo;const no={class:"edit-reel-view"},io={class:"container"},co={class:"mb-4"};function uo(e,t,s,a,l,o){const n=(0,r.g2)("router-link"),i=(0,r.g2)("CreateReel");return(0,r.uX)(),(0,r.CE)("div",no,[(0,r.Lk)("div",io,[(0,r.Lk)("div",co,[(0,r.bF)(n,{to:`/reels/${e.$route.params.id}`,class:"btn btn-outline-secondary"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,r.eW)(" Back to Reel ")]))),_:1},8,["to"])]),(0,r.bF)(i)])])}var mo={name:"EditReelView",components:{CreateReel:ao}};const po=(0,R.A)(mo,[["render",uo],["__scopeId","data-v-6b8a99bf"]]);var vo=po;const fo=[{path:"/",name:"Home",component:Rt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Mt,meta:{guestOnly:!0}},{path:"/register",name:"Register",component:ks,meta:{guestOnly:!0}},{path:"/profile/:username",name:"Profile",component:hs,meta:{requiresAuth:!0}},{path:"/posts/:id",name:"PostDetail",component:na,meta:{requiresAuth:!0}},{path:"/create-post",name:"CreatePost",component:Ea,meta:{requiresAuth:!0}},{path:"/edit-post/:id",name:"EditPost",component:Ta,meta:{requiresAuth:!0}},{path:"/reels",name:"Reels",component:Ir,meta:{requiresAuth:!0}},{path:"/reels/:id",name:"ReelDetail",component:Ul,meta:{requiresAuth:!0}},{path:"/create-reel",name:"CreateReel",component:oo,meta:{requiresAuth:!0}},{path:"/edit-reel/:id",name:"EditReel",component:vo,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Ya}],ko=(0,C.aE)({history:(0,C.LA)("/social_media_platform-frontend/"),routes:fo});ko.beforeEach(((e,t,s)=>{const a=he.getters["auth/isAuthenticated"];e.matched.some((e=>e.meta.requiresAuth))?a?s():s({name:"Login",query:{redirect:e.fullPath.replace("/social_media_platform-frontend","")}}):e.matched.some((e=>e.meta.guestOnly))&&a?s({name:"Home"}):s()}));var go=ko;s(323);const bo=(0,a.Ef)(V);bo.use(he),bo.use(go),bo.config.errorHandler=(e,t,s)=>{console.error("Vue Error:",e),console.error("Info:",s)},bo.mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,l){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],l=e[d][2];for(var n=!0,i=0;i<a.length;i++)(!1&l||o>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(n=!1,l<o&&(o=l));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,r,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,l,o=a[0],n=a[1],i=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(i)var d=i(s)}for(t&&t(a);c<o.length;c++)l=o[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=self["webpackChunksocial_media_frontend"]=self["webpackChunksocial_media_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(2835)}));a=s.O(a)})();
//# sourceMappingURL=app.2aee6831.js.map